import{S as e,i as t,s as a,e as r,t as s,k as n,c as o,a as c,g as i,d as l,n as d,b as u,f as g,R as h,h as f,X as m,N as p,l as v,$,u as x,w as E,x as b,M as w,ac as y,Q as k,O as D,r as I,C as G,W as j,Y as T,al as V,J as N,K as A,j as O,m as C,o as P,am as H,L as S,v as q}from"../../../chunks/vendor-ecacde99.js";import{l as B}from"../../../chunks/gql-5f336112.js";import{r as L,s as M}from"../../../chunks/graphql-7c12eb8b.js";import{p as R}from"../../../chunks/routing-1d144003.js";import{b as U}from"../../../chunks/paths-6758d194.js";import{a as W}from"../../../chunks/user-bb5babe5.js";import{g as _}from"../../../chunks/navigation-51f4a605.js";import{D as J}from"../../../chunks/Dialog-da2d79a0.js";import{T as K}from"../../../chunks/Toast-1c3d573d.js";import{m as Q}from"../../../chunks/markdown-58cc1c31.js";import"../../../chunks/singletons-12a22614.js";function X(e){let t,a,p,v,$,x,E,b,w,y,k=e[0].created_at+"";return{c(){t=r("div"),a=r("h3"),p=s("Info"),v=n(),$=r("span"),x=r("strong"),E=s("Created:"),b=n(),w=s(k),y=r("br"),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=c(t);a=o(r,"H3",{class:!0});var s=c(a);p=i(s,"Info"),s.forEach(l),v=d(r),$=o(r,"SPAN",{});var n=c($);x=o(n,"STRONG",{});var u=c(x);E=i(u,"Created:"),u.forEach(l),b=d(n),w=i(n,k),n.forEach(l),y=o(r,"BR",{}),r.forEach(l),this.h()},h(){u(a,"class","text-2xl my-4 font-bold"),u(t,"class","text-lg")},m(e,r){g(e,t,r),h(t,a),h(a,p),h(t,v),h(t,$),h($,x),h(x,E),h($,b),h($,w),h(t,y)},p(e,[t]){1&t&&k!==(k=e[0].created_at+"")&&f(w,k)},i:m,o:m,d(e){e&&l(t)}}}function Y(e,t,a){let{guide:r}=t;return e.$$set=e=>{"guide"in e&&a(0,r=e.guide)},[r]}class z extends e{constructor(e){super(),t(this,e,Y,X,a,{guide:0})}}function F(e){let t,a,p,v,$,x,E,b,w,y,k,D,I,G,j,T,V=e[0].username+"";return{c(){t=r("div"),a=r("h3"),p=s("Author"),v=n(),$=r("div"),x=r("div"),E=r("div"),w=n(),y=r("div"),k=r("a"),D=s(V),G=n(),j=r("div"),T=s("Writer"),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=c(t);a=o(r,"H3",{class:!0});var s=c(a);p=i(s,"Author"),s.forEach(l),v=d(r),$=o(r,"DIV",{class:!0});var n=c($);x=o(n,"DIV",{class:!0});var u=c(x);E=o(u,"DIV",{class:!0,style:!0}),c(E).forEach(l),w=d(u),y=o(u,"DIV",{class:!0});var g=c(y);k=o(g,"A",{href:!0,class:!0});var h=c(k);D=i(h,V),h.forEach(l),G=d(g),j=o(g,"DIV",{});var f=c(j);T=i(f,"Writer"),f.forEach(l),g.forEach(l),u.forEach(l),n.forEach(l),r.forEach(l),this.h()},h(){u(a,"class","text-2xl my-4 font-bold"),u(E,"class","rounded-full bg-cover w-14 h-14"),u(E,"style",b=`background-image: url("${e[0].avatar}")`),u(k,"href",I=U+"/user/"+e[0].id+"/"),u(k,"class","text-yellow-500 underline"),u(y,"class","grid grid-flow-row"),u(x,"class","grid grid-flow-col auto-cols-min gap-x-4"),u($,"class","grid auto-rows-min text-lg gap-y-4"),u(t,"class","grid grid-flow-row gap-y-6")},m(e,r){g(e,t,r),h(t,a),h(a,p),h(t,v),h(t,$),h($,x),h(x,E),h(x,w),h(x,y),h(y,k),h(k,D),h(y,G),h(y,j),h(j,T)},p(e,[t]){1&t&&b!==(b=`background-image: url("${e[0].avatar}")`)&&u(E,"style",b),1&t&&V!==(V=e[0].username+"")&&f(D,V),1&t&&I!==(I=U+"/user/"+e[0].id+"/")&&u(k,"href",I)},i:m,o:m,d(e){e&&l(t)}}}function Z(e,t,a){let{author:r}=t;return e.$$set=e=>{"author"in e&&a(0,r=e.author)},[r]}class ee extends e{constructor(e){super(),t(this,e,Z,F,a,{author:0})}}function te(e){return document.title="Edit "+e[3].data.getGuide.name+" - SMR",{c:m,l:m,m:m,d:m}}function ae(e){let t;return{c(){t=s("404")},l(e){t=i(e,"404")},m(e,a){g(e,t,a)},p:m,i:m,o:m,d(e){e&&l(t)}}}function re(e){let t,a,m,p,v,$,E,w,y,k,D,I,G,j,T,B,L,M,R,U,W,_=e[3].data.getGuide.name+"",X=e[5]&&oe(e),Y={ctx:e,current:null,token:null,hasCatch:!1,pending:le,then:ie,catch:ce,value:21};function F(t){e[18](t)}V(y=Q(e[3].data.getGuide.guide),Y),I=new z({props:{guide:e[3].data.getGuide}}),j=new ee({props:{author:e[3].data.getGuide.user}});let Z={$$slots:{default:[de]},$$scope:{ctx:e}};function te(t){e[19](t)}void 0!==e[6]&&(Z.open=e[6]),B=new J({props:Z}),N.push((()=>A(B,"open",F)));let ae={$$slots:{default:[ue]},$$scope:{ctx:e}};return void 0!==e[2]&&(ae.running=e[2]),R=new K({props:ae}),N.push((()=>A(R,"running",te))),{c(){t=r("div"),a=r("div"),m=r("div"),p=r("h1"),v=s(_),$=n(),X&&X.c(),E=n(),w=r("div"),Y.block.c(),k=n(),D=r("div"),O(I.$$.fragment),G=n(),O(j.$$.fragment),T=n(),O(B.$$.fragment),M=n(),O(R.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=c(t);a=o(r,"DIV",{class:!0});var s=c(a);m=o(s,"DIV",{class:!0});var n=c(m);p=o(n,"H1",{class:!0});var u=c(p);v=i(u,_),u.forEach(l),$=d(n),X&&X.l(n),n.forEach(l),E=d(s),w=o(s,"DIV",{class:!0});var g=c(w);Y.block.l(g),g.forEach(l),s.forEach(l),k=d(r),D=o(r,"DIV",{class:!0});var h=c(D);C(I.$$.fragment,h),G=d(h),C(j.$$.fragment,h),h.forEach(l),r.forEach(l),T=d(e),C(B.$$.fragment,e),M=d(e),C(R.$$.fragment,e),this.h()},h(){u(p,"class","text-4xl my-4 font-bold"),u(m,"class","grid grid-flow-col grid-auto-max h-auto gap-4 items-center svelte-1sejgqw"),u(w,"class","markdown-content"),u(a,"class","grid grid-cols-1 auto-rows-min gap-8"),u(D,"class","grid grid-cols-1 auto-rows-min gap-8"),u(t,"class","grid gap-8 grid-auto-max svelte-1sejgqw")},m(e,r){g(e,t,r),h(t,a),h(a,m),h(m,p),h(p,v),h(m,$),X&&X.m(m,null),h(a,E),h(a,w),Y.block.m(w,Y.anchor=null),Y.mount=()=>w,Y.anchor=null,h(t,k),h(t,D),P(I,D,null),h(D,G),P(j,D,null),g(e,T,r),P(B,e,r),g(e,M,r),P(R,e,r),W=!0},p(t,a){e=t,(!W||8&a)&&_!==(_=e[3].data.getGuide.name+"")&&f(v,_),e[5]?X?X.p(e,a):(X=oe(e),X.c(),X.m(m,null)):X&&(X.d(1),X=null),Y.ctx=e,8&a&&y!==(y=Q(e[3].data.getGuide.guide))&&V(y,Y)||H(Y,e,a);const r={};8&a&&(r.guide=e[3].data.getGuide),I.$set(r);const s={};8&a&&(s.author=e[3].data.getGuide.user),j.$set(s);const n={};4194304&a&&(n.$$scope={dirty:a,ctx:e}),!L&&64&a&&(L=!0,n.open=e[6],S((()=>L=!1))),B.$set(n);const o={};4194320&a&&(o.$$scope={dirty:a,ctx:e}),!U&&4&a&&(U=!0,o.running=e[2],S((()=>U=!1))),R.$set(o)},i(e){W||(b(I.$$.fragment,e),b(j.$$.fragment,e),b(B.$$.fragment,e),b(R.$$.fragment,e),W=!0)},o(e){x(I.$$.fragment,e),x(j.$$.fragment,e),x(B.$$.fragment,e),x(R.$$.fragment,e),W=!1},d(e){e&&l(t),X&&X.d(),Y.block.d(),Y.token=null,Y=null,q(I),q(j),e&&l(T),q(B,e),e&&l(M),q(R,e)}}}function se(e){let t,a,n,d=e[3].error.message+"";return{c(){t=r("p"),a=s("Oh no... "),n=s(d)},l(e){t=o(e,"P",{});var r=c(t);a=i(r,"Oh no... "),n=i(r,d),r.forEach(l)},m(e,r){g(e,t,r),h(t,a),h(t,n)},p(e,t){8&t&&d!==(d=e[3].error.message+"")&&f(n,d)},i:m,o:m,d(e){e&&l(t)}}}function ne(e){let t,a;return{c(){t=r("p"),a=s("Loading...")},l(e){t=o(e,"P",{});var r=c(t);a=i(r,"Loading..."),r.forEach(l)},m(e,r){g(e,t,r),h(t,a)},p:m,i:m,o:m,d(e){e&&l(t)}}}function oe(e){let t,a,f,p,v,$,x;return{c(){t=r("button"),a=s("Edit"),f=n(),p=r("button"),v=s("Delete"),this.h()},l(e){t=o(e,"BUTTON",{class:!0});var r=c(t);a=i(r,"Edit"),r.forEach(l),f=d(e),p=o(e,"BUTTON",{class:!0});var s=c(p);v=i(s,"Delete"),s.forEach(l),this.h()},h(){u(t,"class","py-2 px-4 rounded text-base bg-yellow-600"),u(p,"class","py-2 px-4 rounded text-base bg-red-500")},m(r,s){g(r,t,s),h(t,a),g(r,f,s),g(r,p,s),h(p,v),$||(x=[j(t,"click",e[14]),j(p,"click",e[15])],$=!0)},p:m,d(e){e&&l(t),e&&l(f),e&&l(p),$=!1,T(x)}}}function ce(e){return{c:m,l:m,m:m,p:m,d:m}}function ie(e){let t,a=e[21]+"";return{c(){t=r("p")},l(e){t=o(e,"P",{}),c(t).forEach(l)},m(e,r){g(e,t,r),t.innerHTML=a},p(e,r){8&r&&a!==(a=e[21]+"")&&(t.innerHTML=a)},d(e){e&&l(t)}}}function le(e){return{c:m,l:m,m:m,p:m,d:m}}function de(e){let t,a,f,p,v,$,x,E,b,w,y,k,D,I;return{c(){t=r("div"),a=r("h3"),f=s("Delete Guide?"),p=n(),v=r("span"),$=s("Are you sure you wish to delete this guide"),x=n(),E=r("button"),b=s("Cancel"),w=n(),y=r("button"),k=s("Delete"),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=c(t);a=o(r,"H3",{class:!0});var s=c(a);f=i(s,"Delete Guide?"),s.forEach(l),p=d(r),v=o(r,"SPAN",{});var n=c(v);$=i(n,"Are you sure you wish to delete this guide"),n.forEach(l),x=d(r),E=o(r,"BUTTON",{class:!0});var u=c(E);b=i(u,"Cancel"),u.forEach(l),w=d(r),y=o(r,"BUTTON",{class:!0});var g=c(y);k=i(g,"Delete"),g.forEach(l),r.forEach(l),this.h()},h(){u(a,"class","text-2xl font-bold"),u(E,"class","py-1 px-4 rounded text-base bg-yellow-600"),u(y,"class","py-1 px-4 rounded text-base bg-red-500"),u(t,"class","grid grid-flow-row gap-4")},m(r,s){g(r,t,s),h(t,a),h(a,f),h(t,p),h(t,v),h(v,$),h(t,x),h(t,E),h(E,b),h(t,w),h(t,y),h(y,k),D||(I=[j(E,"click",e[16]),j(y,"click",e[17])],D=!0)},p:m,d(e){e&&l(t),D=!1,T(I)}}}function ue(e){let t,a;return{c(){t=r("span"),a=s(e[4])},l(r){t=o(r,"SPAN",{});var s=c(t);a=i(s,e[4]),s.forEach(l)},m(e,r){g(e,t,r),h(t,a)},p(e,t){16&t&&f(a,e[4])},d(e){e&&l(t)}}}function ge(e){let t,a,r,s,o,c,i=!e[3].fetching&&!e[3].error&&e[3].data.getGuide&&te(e);const u=[ne,se,re,ae],f=[];function m(e,t){return e[3].fetching?0:e[3].error?1:e[3].data.getGuide?2:3}return r=m(e),s=f[r]=u[r](e),{c(){i&&i.c(),t=v(),a=n(),s.c(),o=v()},l(e){const r=$('[data-svelte="svelte-1y5e1sj"]',document.head);i&&i.l(r),t=v(),r.forEach(l),a=d(e),s.l(e),o=v()},m(e,s){i&&i.m(document.head,null),h(document.head,t),g(e,a,s),f[r].m(e,s),g(e,o,s),c=!0},p(e,[a]){e[3].fetching||e[3].error||!e[3].data.getGuide?i&&(i.d(1),i=null):i||(i=te(e),i.c(),i.m(t.parentNode,t));let n=r;r=m(e),r===n?f[r].p(e,a):(I(),x(f[n],1,1,(()=>{f[n]=null})),E(),s=f[r],s?s.p(e,a):(s=f[r]=u[r](e),s.c()),b(s,1),s.m(o.parentNode,o))},i(e){c||(b(s),c=!0)},o(e){x(s),c=!1},d(e){i&&i.d(e),l(t),e&&l(a),f[r].d(e),e&&l(o)}}}var he=function(e,t,a,r){return new(a||(a=Promise))((function(s,n){function o(e){try{i(r.next(e))}catch(t){n(t)}}function c(e){try{i(r.throw(e))}catch(t){n(t)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,c)}i((r=r.apply(e,t||[])).next())}))};const fe=p(L,{guide:void 0}),me=R((e=>he(void 0,void 0,void 0,(function*(){return fe.variables.guide=e.page.params.guideId,B({guide:fe})(e)}))));function pe(e,t,a){let r,s,n,o,c=m,i=()=>(c(),c=y(f,(e=>a(3,s=e))),f);var l,d,u,g;w(e,W,(e=>a(13,n=e))),e.$$.on_destroy.push((()=>c()));let{guideId:h}=t,{guide:f}=t;i();let p="",v=!1;const $=k({query:M}),x=G(!1);w(e,x,(e=>a(6,o=e)));const E=()=>{$({guideId:h}).then((e=>{e.error?(console.error(e.error.message),a(4,p="Error deleting guide: "+e.error.message),a(2,v=!0)):_(U+"/guides")}))};D(f);return e.$$set=e=>{"guideId"in e&&a(0,h=e.guideId),"guide"in e&&i(a(1,f=e.guide))},e.$$.update=()=>{15880&e.$$.dirty&&a(5,r=(null===a(9,l=null==n?void 0:n.roles)||void 0===l?void 0:l.deleteContent)||(null==n?void 0:n.id)===(null===a(12,g=null===a(11,u=null===a(10,d=null==s?void 0:s.data)||void 0===d?void 0:d.getGuide)||void 0===u?void 0:u.user)||void 0===g?void 0:g.id)),4&e.$$.dirty&&(v||a(4,p=""))},[h,f,v,s,p,r,o,x,E,l,d,u,g,n,()=>_(U+"/guide/"+h+"/edit"),()=>x.set(!0),()=>x.set(!1),()=>E(),function(e){o=e,x.set(o)},function(e){v=e,a(2,v)}]}class ve extends e{constructor(e){super(),t(this,e,pe,ge,a,{guideId:0,guide:1})}}export{ve as default,me as load};
//# sourceMappingURL=index.svelte-fc48be5b.js.map
