import{S as e,i as t,s,X as a,J as r,K as n,l as o,k as i,e as d,t as u,j as c,$ as m,d as g,n as l,c as f,a as h,g as p,m as $,b as k,R as j,f as v,o as G,u as E,w as b,x,L as I,v as S,N as w,M as y,Q as N,O as L,r as O,h as P}from"../../../chunks/vendor-ecacde99.js";import{p as T}from"../../../chunks/routing-1d144003.js";import{r as q,E as M}from"../../../chunks/graphql-7c12eb8b.js";import{T as R}from"../../../chunks/Toast-1c3d573d.js";import{g as V}from"../../../chunks/navigation-51f4a605.js";import{G as A}from"../../../chunks/GuideForm-1c364886.js";import{b as F}from"../../../chunks/paths-6758d194.js";import"../../../chunks/singletons-12a22614.js";import"../../../chunks/forms-8d025218.js";import"../../../chunks/markdown-58cc1c31.js";function H(e){return document.title=e[2].data.getGuide.name+" - SMR",{c:a,l:a,m:a,d:a}}function J(e){let t,s;return t=new A({props:{onSubmit:e[4],initialValues:e[2].data.getGuide,submitText:"Save"}}),{c(){c(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,a){G(t,e,a),s=!0},p(e,s){const a={};4&s&&(a.initialValues=e[2].data.getGuide),t.$set(a)},i(e){s||(x(t.$$.fragment,e),s=!0)},o(e){E(t.$$.fragment,e),s=!1},d(e){S(t,e)}}}function K(e){let t,s,r,n=e[2].error.message+"";return{c(){t=d("p"),s=u("Oh no... "),r=u(n)},l(e){t=f(e,"P",{});var a=h(t);s=p(a,"Oh no... "),r=p(a,n),a.forEach(g)},m(e,a){v(e,t,a),j(t,s),j(t,r)},p(e,t){4&t&&n!==(n=e[2].error.message+"")&&P(r,n)},i:a,o:a,d(e){e&&g(t)}}}function Q(e){let t,s;return{c(){t=d("p"),s=u("Loading...")},l(e){t=f(e,"P",{});var a=h(t);s=p(a,"Loading..."),a.forEach(g)},m(e,a){v(e,t,a),j(t,s)},p:a,i:a,o:a,d(e){e&&g(t)}}}function X(e){let t,s;return{c(){t=d("span"),s=u(e[1])},l(a){t=f(a,"SPAN",{});var r=h(t);s=p(r,e[1]),r.forEach(g)},m(e,a){v(e,t,a),j(t,s)},p(e,t){2&t&&P(s,e[1])},d(e){e&&g(t)}}}function z(e){let t,s,a,w,y,N,L,P,T,q,M,V=!e[2].fetching&&!e[2].error&&e[2].data.getGuide&&H(e);const A=[Q,K,J],F=[];function z(e,t){return e[2].fetching?0:e[2].error?1:2}function B(t){e[6](t)}N=z(e),L=F[N]=A[N](e);let C={$$slots:{default:[X]},$$scope:{ctx:e}};return void 0!==e[0]&&(C.running=e[0]),T=new R({props:C}),r.push((()=>n(T,"running",B))),{c(){V&&V.c(),t=o(),s=i(),a=d("h1"),w=u("Edit Guide"),y=i(),L.c(),P=i(),c(T.$$.fragment),this.h()},l(e){const r=m('[data-svelte="svelte-5h316b"]',document.head);V&&V.l(r),t=o(),r.forEach(g),s=l(e),a=f(e,"H1",{class:!0});var n=h(a);w=p(n,"Edit Guide"),n.forEach(g),y=l(e),L.l(e),P=l(e),$(T.$$.fragment,e),this.h()},h(){k(a,"class","text-4xl my-4 font-bold")},m(e,r){V&&V.m(document.head,null),j(document.head,t),v(e,s,r),v(e,a,r),j(a,w),v(e,y,r),F[N].m(e,r),v(e,P,r),G(T,e,r),M=!0},p(e,[s]){e[2].fetching||e[2].error||!e[2].data.getGuide?V&&(V.d(1),V=null):V||(V=H(e),V.c(),V.m(t.parentNode,t));let a=N;N=z(e),N===a?F[N].p(e,s):(O(),E(F[a],1,1,(()=>{F[a]=null})),b(),L=F[N],L?L.p(e,s):(L=F[N]=A[N](e),L.c()),x(L,1),L.m(P.parentNode,P));const r={};258&s&&(r.$$scope={dirty:s,ctx:e}),!q&&1&s&&(q=!0,r.running=e[0],I((()=>q=!1))),T.$set(r)},i(e){M||(x(L),x(T.$$.fragment,e),M=!0)},o(e){E(L),E(T.$$.fragment,e),M=!1},d(e){V&&V.d(e),g(t),e&&g(s),e&&g(a),e&&g(y),F[N].d(e),e&&g(P),S(T,e)}}}const B=T();function C(e,t,s){let a,{guideId:r}=t,n="",o=!1;const i=w(q,{guide:r});y(e,i,(e=>s(2,a=e)));const d=N({query:M});return L(i),e.$$set=e=>{"guideId"in e&&s(5,r=e.guideId)},e.$$.update=()=>{1&e.$$.dirty&&(o||s(1,n=""))},[o,n,a,i,e=>{d({guideId:r,guide:e}).then((e=>{e.error?(console.error(e.error.message),s(1,n="Error editing guide: "+e.error.message),s(0,o=!0)):V(F+"/guide/"+e.data.updateGuide.id)}))},r,function(e){o=e,s(0,o)}]}class D extends e{constructor(e){super(),t(this,e,C,z,s,{guideId:5})}}export{D as default,B as load};
//# sourceMappingURL=edit.svelte-cec74ec3.js.map
