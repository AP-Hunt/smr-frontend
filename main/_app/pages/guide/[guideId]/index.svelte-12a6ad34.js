import{S as a,i as e,s,e as t,t as r,k as o,c as n,a as c,g as l,d as i,n as d,b as u,f as g,a1 as h,h as f,a7 as m,l as p,u as v,w as $,x,Z as E,$ as b,_ as w,a0 as k,r as y,C as D,a6 as I,a8 as G,aw as T,W as V,X as j,j as N,m as A,o as C,ax as O,Y as H,v as P}from"../../../chunks/vendor-83c23bd8.js";import{p as B}from"../../../chunks/routing-405c8d47.js";import{r as S,s as q}from"../../../chunks/graphql-71bf8d51.js";import{a as L}from"../../../chunks/user-bb53616c.js";import{g as U}from"../../../chunks/navigation-2ffed81e.js";import{D as W}from"../../../chunks/Dialog-ffcbac65.js";import{T as _}from"../../../chunks/Toast-11f90e22.js";import{m as M}from"../../../chunks/markdown-ac91d65c.js";import"../../../chunks/singletons-12a22614.js";function R(a){let e,s,p,v,$,x,E,b,w,k,y=a[0].created_at+"";return{c(){e=t("div"),s=t("h3"),p=r("Info"),v=o(),$=t("span"),x=t("strong"),E=r("Created:"),b=o(),w=r(y),k=t("br"),this.h()},l(a){e=n(a,"DIV",{class:!0});var t=c(e);s=n(t,"H3",{class:!0});var r=c(s);p=l(r,"Info"),r.forEach(i),v=d(t),$=n(t,"SPAN",{});var o=c($);x=n(o,"STRONG",{});var u=c(x);E=l(u,"Created:"),u.forEach(i),b=d(o),w=l(o,y),o.forEach(i),k=n(t,"BR",{}),t.forEach(i),this.h()},h(){u(s,"class","text-2xl my-4 font-bold"),u(e,"class","text-lg")},m(a,t){g(a,e,t),h(e,s),h(s,p),h(e,v),h(e,$),h($,x),h(x,E),h($,b),h($,w),h(e,k)},p(a,[e]){1&e&&y!==(y=a[0].created_at+"")&&f(w,y)},i:m,o:m,d(a){a&&i(e)}}}function X(a,e,s){let{guide:t}=e;return a.$$set=a=>{"guide"in a&&s(0,t=a.guide)},[t]}class Y extends a{constructor(a){super(),e(this,a,X,R,s,{guide:0})}}function Z(a){let e,s,p,v,$,x,E,b,w,k,y,D,I,G,T,V,j=a[0].username+"";return{c(){e=t("div"),s=t("h3"),p=r("Author"),v=o(),$=t("div"),x=t("div"),E=t("div"),w=o(),k=t("div"),y=t("a"),D=r(j),G=o(),T=t("div"),V=r("Writer"),this.h()},l(a){e=n(a,"DIV",{class:!0});var t=c(e);s=n(t,"H3",{class:!0});var r=c(s);p=l(r,"Author"),r.forEach(i),v=d(t),$=n(t,"DIV",{class:!0});var o=c($);x=n(o,"DIV",{class:!0});var u=c(x);E=n(u,"DIV",{class:!0,style:!0}),c(E).forEach(i),w=d(u),k=n(u,"DIV",{class:!0});var g=c(k);y=n(g,"A",{href:!0,class:!0});var h=c(y);D=l(h,j),h.forEach(i),G=d(g),T=n(g,"DIV",{});var f=c(T);V=l(f,"Writer"),f.forEach(i),g.forEach(i),u.forEach(i),o.forEach(i),t.forEach(i),this.h()},h(){u(s,"class","text-2xl my-4 font-bold"),u(E,"class","rounded-full bg-cover w-14 h-14"),u(E,"style",b=`background-image: url("${a[0].avatar}")`),u(y,"href",I="/user/"+a[0].id+"/"),u(y,"class","text-yellow-500 underline"),u(k,"class","grid grid-flow-row"),u(x,"class","grid grid-flow-col auto-cols-min gap-x-4"),u($,"class","grid auto-rows-min text-lg gap-y-4"),u(e,"class","grid grid-flow-row gap-y-6")},m(a,t){g(a,e,t),h(e,s),h(s,p),h(e,v),h(e,$),h($,x),h(x,E),h(x,w),h(x,k),h(k,y),h(y,D),h(k,G),h(k,T),h(T,V)},p(a,[e]){1&e&&b!==(b=`background-image: url("${a[0].avatar}")`)&&u(E,"style",b),1&e&&j!==(j=a[0].username+"")&&f(D,j),1&e&&I!==(I="/user/"+a[0].id+"/")&&u(y,"href",I)},i:m,o:m,d(a){a&&i(e)}}}function z(a,e,s){let{author:t}=e;return a.$$set=a=>{"author"in a&&s(0,t=a.author)},[t]}class F extends a{constructor(a){super(),e(this,a,z,Z,s,{author:0})}}function J(a){let e;return{c(){e=r("404")},l(a){e=l(a,"404")},m(a,s){g(a,e,s)},p:m,i:m,o:m,d(a){a&&i(e)}}}function K(a){let e,s,m,p,$,E,b,w,k,y,D,I,G,B,S,q,L,U,R,X,Z,z=a[2].data.getGuide.name+"",J=a[4]&&ea(a),K={ctx:a,current:null,token:null,hasCatch:!1,pending:ra,then:ta,catch:sa,value:21};function Q(e){a[18](e)}T(k=M(a[2].data.getGuide.guide),K),I=new Y({props:{guide:a[2].data.getGuide}}),B=new F({props:{author:a[2].data.getGuide.user}});let aa={$$slots:{default:[oa]},$$scope:{ctx:a}};function ca(e){a[19](e)}void 0!==a[5]&&(aa.open=a[5]),q=new W({props:aa}),V.push((()=>j(q,"open",Q)));let la={$$slots:{default:[na]},$$scope:{ctx:a}};return void 0!==a[1]&&(la.running=a[1]),R=new _({props:la}),V.push((()=>j(R,"running",ca))),{c(){e=t("div"),s=t("div"),m=t("div"),p=t("h1"),$=r(z),E=o(),J&&J.c(),b=o(),w=t("div"),K.block.c(),y=o(),D=t("div"),N(I.$$.fragment),G=o(),N(B.$$.fragment),S=o(),N(q.$$.fragment),U=o(),N(R.$$.fragment),this.h()},l(a){e=n(a,"DIV",{class:!0});var t=c(e);s=n(t,"DIV",{class:!0});var r=c(s);m=n(r,"DIV",{class:!0});var o=c(m);p=n(o,"H1",{class:!0});var u=c(p);$=l(u,z),u.forEach(i),E=d(o),J&&J.l(o),o.forEach(i),b=d(r),w=n(r,"DIV",{class:!0});var g=c(w);K.block.l(g),g.forEach(i),r.forEach(i),y=d(t),D=n(t,"DIV",{class:!0});var h=c(D);A(I.$$.fragment,h),G=d(h),A(B.$$.fragment,h),h.forEach(i),t.forEach(i),S=d(a),A(q.$$.fragment,a),U=d(a),A(R.$$.fragment,a),this.h()},h(){u(p,"class","text-4xl my-4 font-bold"),u(m,"class","grid grid-flow-col grid-auto-max h-auto gap-4 items-center svelte-1sejgqw"),u(w,"class","markdown-content"),u(s,"class","grid grid-cols-1 auto-rows-min gap-8"),u(D,"class","grid grid-cols-1 auto-rows-min gap-8"),u(e,"class","grid gap-8 grid-auto-max svelte-1sejgqw")},m(a,t){g(a,e,t),h(e,s),h(s,m),h(m,p),h(p,$),h(m,E),J&&J.m(m,null),h(s,b),h(s,w),K.block.m(w,K.anchor=null),K.mount=()=>w,K.anchor=null,h(e,y),h(e,D),C(I,D,null),h(D,G),C(B,D,null),g(a,S,t),C(q,a,t),g(a,U,t),C(R,a,t),Z=!0},p(e,s){a=e,(!Z||4&s)&&z!==(z=a[2].data.getGuide.name+"")&&f($,z),a[4]?J?J.p(a,s):(J=ea(a),J.c(),J.m(m,null)):J&&(J.d(1),J=null),K.ctx=a,4&s&&k!==(k=M(a[2].data.getGuide.guide))&&T(k,K)||O(K,a,s);const t={};4&s&&(t.guide=a[2].data.getGuide),I.$set(t);const r={};4&s&&(r.author=a[2].data.getGuide.user),B.$set(r);const o={};4194304&s&&(o.$$scope={dirty:s,ctx:a}),!L&&32&s&&(L=!0,o.open=a[5],H((()=>L=!1))),q.$set(o);const n={};4194312&s&&(n.$$scope={dirty:s,ctx:a}),!X&&2&s&&(X=!0,n.running=a[1],H((()=>X=!1))),R.$set(n)},i(a){Z||(x(I.$$.fragment,a),x(B.$$.fragment,a),x(q.$$.fragment,a),x(R.$$.fragment,a),Z=!0)},o(a){v(I.$$.fragment,a),v(B.$$.fragment,a),v(q.$$.fragment,a),v(R.$$.fragment,a),Z=!1},d(a){a&&i(e),J&&J.d(),K.block.d(),K.token=null,K=null,P(I),P(B),a&&i(S),P(q,a),a&&i(U),P(R,a)}}}function Q(a){let e,s,o,d=a[2].error.message+"";return{c(){e=t("p"),s=r("Oh no... "),o=r(d)},l(a){e=n(a,"P",{});var t=c(e);s=l(t,"Oh no... "),o=l(t,d),t.forEach(i)},m(a,t){g(a,e,t),h(e,s),h(e,o)},p(a,e){4&e&&d!==(d=a[2].error.message+"")&&f(o,d)},i:m,o:m,d(a){a&&i(e)}}}function aa(a){let e,s;return{c(){e=t("p"),s=r("Loading...")},l(a){e=n(a,"P",{});var t=c(e);s=l(t,"Loading..."),t.forEach(i)},m(a,t){g(a,e,t),h(e,s)},p:m,i:m,o:m,d(a){a&&i(e)}}}function ea(a){let e,s,f,p,v,$,x;return{c(){e=t("button"),s=r("Edit"),f=o(),p=t("button"),v=r("Delete"),this.h()},l(a){e=n(a,"BUTTON",{class:!0});var t=c(e);s=l(t,"Edit"),t.forEach(i),f=d(a),p=n(a,"BUTTON",{class:!0});var r=c(p);v=l(r,"Delete"),r.forEach(i),this.h()},h(){u(e,"class","py-2 px-4 rounded text-base bg-yellow-600"),u(p,"class","py-2 px-4 rounded text-base bg-red-500")},m(t,r){g(t,e,r),h(e,s),g(t,f,r),g(t,p,r),h(p,v),$||(x=[I(e,"click",a[14]),I(p,"click",a[15])],$=!0)},p:m,d(a){a&&i(e),a&&i(f),a&&i(p),$=!1,G(x)}}}function sa(a){return{c:m,l:m,m:m,p:m,d:m}}function ta(a){let e,s=a[21]+"";return{c(){e=t("p")},l(a){e=n(a,"P",{}),c(e).forEach(i)},m(a,t){g(a,e,t),e.innerHTML=s},p(a,t){4&t&&s!==(s=a[21]+"")&&(e.innerHTML=s)},d(a){a&&i(e)}}}function ra(a){return{c:m,l:m,m:m,p:m,d:m}}function oa(a){let e,s,f,p,v,$,x,E,b,w,k,y,D,T;return{c(){e=t("div"),s=t("h3"),f=r("Delete Guide?"),p=o(),v=t("span"),$=r("Are you sure you wish to delete this guide"),x=o(),E=t("button"),b=r("Cancel"),w=o(),k=t("button"),y=r("Delete"),this.h()},l(a){e=n(a,"DIV",{class:!0});var t=c(e);s=n(t,"H3",{class:!0});var r=c(s);f=l(r,"Delete Guide?"),r.forEach(i),p=d(t),v=n(t,"SPAN",{});var o=c(v);$=l(o,"Are you sure you wish to delete this guide"),o.forEach(i),x=d(t),E=n(t,"BUTTON",{class:!0});var u=c(E);b=l(u,"Cancel"),u.forEach(i),w=d(t),k=n(t,"BUTTON",{class:!0});var g=c(k);y=l(g,"Delete"),g.forEach(i),t.forEach(i),this.h()},h(){u(s,"class","text-2xl font-bold"),u(E,"class","py-1 px-4 rounded text-base bg-yellow-600"),u(k,"class","py-1 px-4 rounded text-base bg-red-500"),u(e,"class","grid grid-flow-row gap-4")},m(t,r){g(t,e,r),h(e,s),h(s,f),h(e,p),h(e,v),h(v,$),h(e,x),h(e,E),h(E,b),h(e,w),h(e,k),h(k,y),D||(T=[I(E,"click",a[16]),I(k,"click",a[17])],D=!0)},p:m,d(a){a&&i(e),D=!1,G(T)}}}function na(a){let e,s;return{c(){e=t("span"),s=r(a[3])},l(t){e=n(t,"SPAN",{});var r=c(e);s=l(r,a[3]),r.forEach(i)},m(a,t){g(a,e,t),h(e,s)},p(a,e){8&e&&f(s,a[3])},d(a){a&&i(e)}}}function ca(a){let e,s,t,r;const o=[aa,Q,K,J],n=[];function c(a,e){return a[2].fetching?0:a[2].error?1:a[2].data.getGuide?2:3}return e=c(a),s=n[e]=o[e](a),{c(){s.c(),t=p()},l(a){s.l(a),t=p()},m(a,s){n[e].m(a,s),g(a,t,s),r=!0},p(a,[r]){let l=e;e=c(a),e===l?n[e].p(a,r):(y(),v(n[l],1,1,(()=>{n[l]=null})),$(),s=n[e],s?s.p(a,r):(s=n[e]=o[e](a),s.c()),x(s,1),s.m(t.parentNode,t))},i(a){r||(x(s),r=!0)},o(a){v(s),r=!1},d(a){n[e].d(a),a&&i(t)}}}const la=B();function ia(a,e,s){let t,r,o,n;var c,l,i,d;E(a,L,(a=>s(13,o=a)));let{guideId:u}=e,g="",h=!1;const f=b(q,{guide:u});E(a,f,(a=>s(2,r=a)));const m=w({query:S}),p=D(!1);E(a,p,(a=>s(5,n=a)));const v=()=>{m({guideId:u}).then((a=>{a.error?(console.error(a.error.message),s(3,g="Error deleting guide: "+a.error.message),s(1,h=!0)):U("/guides")}))};k(f);return a.$$set=a=>{"guideId"in a&&s(0,u=a.guideId)},a.$$.update=()=>{15876&a.$$.dirty&&s(4,t=(null===s(9,c=null==o?void 0:o.roles)||void 0===c?void 0:c.deleteContent)||(null==o?void 0:o.id)===(null===s(12,d=null===s(11,i=null===s(10,l=null==r?void 0:r.data)||void 0===l?void 0:l.getGuide)||void 0===i?void 0:i.user)||void 0===d?void 0:d.id)),2&a.$$.dirty&&(h||s(3,g=""))},[u,h,r,g,t,n,f,p,v,c,l,i,d,o,()=>U("/guide/"+u+"/edit"),()=>p.set(!0),()=>p.set(!1),()=>v(),function(a){n=a,p.set(n)},function(a){h=a,s(1,h)}]}class da extends a{constructor(a){super(),e(this,a,ia,ca,s,{guideId:0})}}export{da as default,la as load};
