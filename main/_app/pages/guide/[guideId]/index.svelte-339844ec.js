import{S as e,i as t,s as a,e as r,t as s,k as n,c as o,a as c,g as i,d as l,n as d,b as u,f,Q as g,h,W as m,M as p,l as v,Z as $,u as x,w as E,x as b,L as w,ab as y,P as k,N as I,r as D,C as j,V as G,X as V,ak as T,I as N,J as A,j as P,m as C,o as O,al as H,K as S,v as q}from"../../../chunks/vendor-9ef56761.js";import{l as B}from"../../../chunks/gql-fb82bae1.js";import{r as L,s as M}from"../../../chunks/graphql-7c12eb8b.js";import{p as U}from"../../../chunks/routing-1d144003.js";import{b as R}from"../../../chunks/paths-6758d194.js";import{a as W}from"../../../chunks/user-f1838cad.js";import{g as _}from"../../../chunks/navigation-51f4a605.js";import{D as J}from"../../../chunks/Dialog-fc65cda9.js";import{T as K}from"../../../chunks/Toast-70852bff.js";import{m as Q}from"../../../chunks/markdown-f46c64ca.js";import"../../../chunks/singletons-12a22614.js";function X(e){let t,a,p,v,$,x,E,b,w,y,k=e[0].created_at+"";return{c(){t=r("div"),a=r("h3"),p=s("Info"),v=n(),$=r("span"),x=r("strong"),E=s("Created:"),b=n(),w=s(k),y=r("br"),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=c(t);a=o(r,"H3",{class:!0});var s=c(a);p=i(s,"Info"),s.forEach(l),v=d(r),$=o(r,"SPAN",{});var n=c($);x=o(n,"STRONG",{});var u=c(x);E=i(u,"Created:"),u.forEach(l),b=d(n),w=i(n,k),n.forEach(l),y=o(r,"BR",{}),r.forEach(l),this.h()},h(){u(a,"class","text-2xl my-4 font-bold"),u(t,"class","text-lg")},m(e,r){f(e,t,r),g(t,a),g(a,p),g(t,v),g(t,$),g($,x),g(x,E),g($,b),g($,w),g(t,y)},p(e,[t]){1&t&&k!==(k=e[0].created_at+"")&&h(w,k)},i:m,o:m,d(e){e&&l(t)}}}function Z(e,t,a){let{guide:r}=t;return e.$$set=e=>{"guide"in e&&a(0,r=e.guide)},[r]}class z extends e{constructor(e){super(),t(this,e,Z,X,a,{guide:0})}}function F(e){let t,a,p,v,$,x,E,b,w,y,k,I,D,j,G,V,T=e[0].username+"";return{c(){t=r("div"),a=r("h3"),p=s("Author"),v=n(),$=r("div"),x=r("div"),E=r("div"),w=n(),y=r("div"),k=r("a"),I=s(T),j=n(),G=r("div"),V=s("Writer"),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=c(t);a=o(r,"H3",{class:!0});var s=c(a);p=i(s,"Author"),s.forEach(l),v=d(r),$=o(r,"DIV",{class:!0});var n=c($);x=o(n,"DIV",{class:!0});var u=c(x);E=o(u,"DIV",{class:!0,style:!0}),c(E).forEach(l),w=d(u),y=o(u,"DIV",{class:!0});var f=c(y);k=o(f,"A",{href:!0,class:!0});var g=c(k);I=i(g,T),g.forEach(l),j=d(f),G=o(f,"DIV",{});var h=c(G);V=i(h,"Writer"),h.forEach(l),f.forEach(l),u.forEach(l),n.forEach(l),r.forEach(l),this.h()},h(){u(a,"class","text-2xl my-4 font-bold"),u(E,"class","rounded-full bg-cover w-14 h-14"),u(E,"style",b=`background-image: url("${e[0].avatar}")`),u(k,"href",D=R+"/user/"+e[0].id+"/"),u(k,"class","text-yellow-500 underline"),u(y,"class","grid grid-flow-row"),u(x,"class","grid grid-flow-col auto-cols-min gap-x-4"),u($,"class","grid auto-rows-min text-lg gap-y-4"),u(t,"class","grid grid-flow-row gap-y-6")},m(e,r){f(e,t,r),g(t,a),g(a,p),g(t,v),g(t,$),g($,x),g(x,E),g(x,w),g(x,y),g(y,k),g(k,I),g(y,j),g(y,G),g(G,V)},p(e,[t]){1&t&&b!==(b=`background-image: url("${e[0].avatar}")`)&&u(E,"style",b),1&t&&T!==(T=e[0].username+"")&&h(I,T),1&t&&D!==(D=R+"/user/"+e[0].id+"/")&&u(k,"href",D)},i:m,o:m,d(e){e&&l(t)}}}function Y(e,t,a){let{author:r}=t;return e.$$set=e=>{"author"in e&&a(0,r=e.author)},[r]}class ee extends e{constructor(e){super(),t(this,e,Y,F,a,{author:0})}}function te(e){return document.title="Edit "+e[3].data.getGuide.name+" - SMR",{c:m,l:m,m:m,d:m}}function ae(e){let t;return{c(){t=s("404")},l(e){t=i(e,"404")},m(e,a){f(e,t,a)},p:m,i:m,o:m,d(e){e&&l(t)}}}function re(e){let t,a,m,p,v,$,E,w,y,k,I,D,j,G,V,B,L,M,U,R,W,_=e[3].data.getGuide.name+"",X=e[5]&&oe(e),Z={ctx:e,current:null,token:null,hasCatch:!1,pending:le,then:ie,catch:ce,value:21};function F(t){e[18](t)}T(y=Q(e[3].data.getGuide.guide),Z),D=new z({props:{guide:e[3].data.getGuide}}),G=new ee({props:{author:e[3].data.getGuide.user}});let Y={$$slots:{default:[de]},$$scope:{ctx:e}};function te(t){e[19](t)}void 0!==e[6]&&(Y.open=e[6]),B=new J({props:Y}),N.push((()=>A(B,"open",F)));let ae={$$slots:{default:[ue]},$$scope:{ctx:e}};return void 0!==e[2]&&(ae.running=e[2]),U=new K({props:ae}),N.push((()=>A(U,"running",te))),{c(){t=r("div"),a=r("div"),m=r("div"),p=r("h1"),v=s(_),$=n(),X&&X.c(),E=n(),w=r("div"),Z.block.c(),k=n(),I=r("div"),P(D.$$.fragment),j=n(),P(G.$$.fragment),V=n(),P(B.$$.fragment),M=n(),P(U.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=c(t);a=o(r,"DIV",{class:!0});var s=c(a);m=o(s,"DIV",{class:!0});var n=c(m);p=o(n,"H1",{class:!0});var u=c(p);v=i(u,_),u.forEach(l),$=d(n),X&&X.l(n),n.forEach(l),E=d(s),w=o(s,"DIV",{class:!0});var f=c(w);Z.block.l(f),f.forEach(l),s.forEach(l),k=d(r),I=o(r,"DIV",{class:!0});var g=c(I);C(D.$$.fragment,g),j=d(g),C(G.$$.fragment,g),g.forEach(l),r.forEach(l),V=d(e),C(B.$$.fragment,e),M=d(e),C(U.$$.fragment,e),this.h()},h(){u(p,"class","text-4xl my-4 font-bold"),u(m,"class","grid grid-flow-col grid-auto-max h-auto gap-4 items-center svelte-1sejgqw"),u(w,"class","markdown-content"),u(a,"class","grid grid-cols-1 auto-rows-min gap-8"),u(I,"class","grid grid-cols-1 auto-rows-min gap-8"),u(t,"class","grid gap-8 grid-auto-max svelte-1sejgqw")},m(e,r){f(e,t,r),g(t,a),g(a,m),g(m,p),g(p,v),g(m,$),X&&X.m(m,null),g(a,E),g(a,w),Z.block.m(w,Z.anchor=null),Z.mount=()=>w,Z.anchor=null,g(t,k),g(t,I),O(D,I,null),g(I,j),O(G,I,null),f(e,V,r),O(B,e,r),f(e,M,r),O(U,e,r),W=!0},p(t,a){e=t,(!W||8&a)&&_!==(_=e[3].data.getGuide.name+"")&&h(v,_),e[5]?X?X.p(e,a):(X=oe(e),X.c(),X.m(m,null)):X&&(X.d(1),X=null),Z.ctx=e,8&a&&y!==(y=Q(e[3].data.getGuide.guide))&&T(y,Z)||H(Z,e,a);const r={};8&a&&(r.guide=e[3].data.getGuide),D.$set(r);const s={};8&a&&(s.author=e[3].data.getGuide.user),G.$set(s);const n={};4194304&a&&(n.$$scope={dirty:a,ctx:e}),!L&&64&a&&(L=!0,n.open=e[6],S((()=>L=!1))),B.$set(n);const o={};4194320&a&&(o.$$scope={dirty:a,ctx:e}),!R&&4&a&&(R=!0,o.running=e[2],S((()=>R=!1))),U.$set(o)},i(e){W||(b(D.$$.fragment,e),b(G.$$.fragment,e),b(B.$$.fragment,e),b(U.$$.fragment,e),W=!0)},o(e){x(D.$$.fragment,e),x(G.$$.fragment,e),x(B.$$.fragment,e),x(U.$$.fragment,e),W=!1},d(e){e&&l(t),X&&X.d(),Z.block.d(),Z.token=null,Z=null,q(D),q(G),e&&l(V),q(B,e),e&&l(M),q(U,e)}}}function se(e){let t,a,n,d=e[3].error.message+"";return{c(){t=r("p"),a=s("Oh no... "),n=s(d)},l(e){t=o(e,"P",{});var r=c(t);a=i(r,"Oh no... "),n=i(r,d),r.forEach(l)},m(e,r){f(e,t,r),g(t,a),g(t,n)},p(e,t){8&t&&d!==(d=e[3].error.message+"")&&h(n,d)},i:m,o:m,d(e){e&&l(t)}}}function ne(e){let t,a;return{c(){t=r("p"),a=s("Loading...")},l(e){t=o(e,"P",{});var r=c(t);a=i(r,"Loading..."),r.forEach(l)},m(e,r){f(e,t,r),g(t,a)},p:m,i:m,o:m,d(e){e&&l(t)}}}function oe(e){let t,a,h,p,v,$,x;return{c(){t=r("button"),a=s("Edit"),h=n(),p=r("button"),v=s("Delete"),this.h()},l(e){t=o(e,"BUTTON",{class:!0});var r=c(t);a=i(r,"Edit"),r.forEach(l),h=d(e),p=o(e,"BUTTON",{class:!0});var s=c(p);v=i(s,"Delete"),s.forEach(l),this.h()},h(){u(t,"class","py-2 px-4 rounded text-base bg-yellow-600"),u(p,"class","py-2 px-4 rounded text-base bg-red-500")},m(r,s){f(r,t,s),g(t,a),f(r,h,s),f(r,p,s),g(p,v),$||(x=[G(t,"click",e[14]),G(p,"click",e[15])],$=!0)},p:m,d(e){e&&l(t),e&&l(h),e&&l(p),$=!1,V(x)}}}function ce(e){return{c:m,l:m,m:m,p:m,d:m}}function ie(e){let t,a=e[21]+"";return{c(){t=r("p")},l(e){t=o(e,"P",{}),c(t).forEach(l)},m(e,r){f(e,t,r),t.innerHTML=a},p(e,r){8&r&&a!==(a=e[21]+"")&&(t.innerHTML=a)},d(e){e&&l(t)}}}function le(e){return{c:m,l:m,m:m,p:m,d:m}}function de(e){let t,a,h,p,v,$,x,E,b,w,y,k,I,D;return{c(){t=r("div"),a=r("h3"),h=s("Delete Guide?"),p=n(),v=r("span"),$=s("Are you sure you wish to delete this guide"),x=n(),E=r("button"),b=s("Cancel"),w=n(),y=r("button"),k=s("Delete"),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=c(t);a=o(r,"H3",{class:!0});var s=c(a);h=i(s,"Delete Guide?"),s.forEach(l),p=d(r),v=o(r,"SPAN",{});var n=c(v);$=i(n,"Are you sure you wish to delete this guide"),n.forEach(l),x=d(r),E=o(r,"BUTTON",{class:!0});var u=c(E);b=i(u,"Cancel"),u.forEach(l),w=d(r),y=o(r,"BUTTON",{class:!0});var f=c(y);k=i(f,"Delete"),f.forEach(l),r.forEach(l),this.h()},h(){u(a,"class","text-2xl font-bold"),u(E,"class","py-1 px-4 rounded text-base bg-yellow-600"),u(y,"class","py-1 px-4 rounded text-base bg-red-500"),u(t,"class","grid grid-flow-row gap-4")},m(r,s){f(r,t,s),g(t,a),g(a,h),g(t,p),g(t,v),g(v,$),g(t,x),g(t,E),g(E,b),g(t,w),g(t,y),g(y,k),I||(D=[G(E,"click",e[16]),G(y,"click",e[17])],I=!0)},p:m,d(e){e&&l(t),I=!1,V(D)}}}function ue(e){let t,a;return{c(){t=r("span"),a=s(e[4])},l(r){t=o(r,"SPAN",{});var s=c(t);a=i(s,e[4]),s.forEach(l)},m(e,r){f(e,t,r),g(t,a)},p(e,t){16&t&&h(a,e[4])},d(e){e&&l(t)}}}function fe(e){let t,a,r,s,o,c,i=!e[3].fetching&&!e[3].error&&te(e);const u=[ne,se,re,ae],h=[];function m(e,t){return e[3].fetching?0:e[3].error?1:e[3].data.getGuide?2:3}return r=m(e),s=h[r]=u[r](e),{c(){i&&i.c(),t=v(),a=n(),s.c(),o=v()},l(e){const r=$('[data-svelte="svelte-do4etv"]',document.head);i&&i.l(r),t=v(),r.forEach(l),a=d(e),s.l(e),o=v()},m(e,s){i&&i.m(document.head,null),g(document.head,t),f(e,a,s),h[r].m(e,s),f(e,o,s),c=!0},p(e,[a]){e[3].fetching||e[3].error?i&&(i.d(1),i=null):i||(i=te(e),i.c(),i.m(t.parentNode,t));let n=r;r=m(e),r===n?h[r].p(e,a):(D(),x(h[n],1,1,(()=>{h[n]=null})),E(),s=h[r],s?s.p(e,a):(s=h[r]=u[r](e),s.c()),b(s,1),s.m(o.parentNode,o))},i(e){c||(b(s),c=!0)},o(e){x(s),c=!1},d(e){i&&i.d(e),l(t),e&&l(a),h[r].d(e),e&&l(o)}}}var ge=function(e,t,a,r){return new(a||(a=Promise))((function(s,n){function o(e){try{i(r.next(e))}catch(t){n(t)}}function c(e){try{i(r.throw(e))}catch(t){n(t)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,c)}i((r=r.apply(e,t||[])).next())}))};const he=p(L,{guide:void 0}),me=U((e=>ge(void 0,void 0,void 0,(function*(){return he.variables.guide=e.page.params.guideId,B({guide:he})(e)}))));function pe(e,t,a){let r,s,n,o,c=m,i=()=>(c(),c=y(h,(e=>a(3,s=e))),h);var l,d,u,f;w(e,W,(e=>a(13,n=e))),e.$$.on_destroy.push((()=>c()));let{guideId:g}=t,{guide:h}=t;i();let p="",v=!1;const $=k({query:M}),x=j(!1);w(e,x,(e=>a(6,o=e)));const E=()=>{$({guideId:g}).then((e=>{e.error?(console.error(e.error.message),a(4,p="Error deleting guide: "+e.error.message),a(2,v=!0)):_(R+"/guides")}))};I(h);return e.$$set=e=>{"guideId"in e&&a(0,g=e.guideId),"guide"in e&&i(a(1,h=e.guide))},e.$$.update=()=>{15880&e.$$.dirty&&a(5,r=(null===a(9,l=null==n?void 0:n.roles)||void 0===l?void 0:l.deleteContent)||(null==n?void 0:n.id)===(null===a(12,f=null===a(11,u=null===a(10,d=null==s?void 0:s.data)||void 0===d?void 0:d.getGuide)||void 0===u?void 0:u.user)||void 0===f?void 0:f.id)),4&e.$$.dirty&&(v||a(4,p=""))},[g,h,v,s,p,r,o,x,E,l,d,u,f,n,()=>_(R+"/guide/"+g+"/edit"),()=>x.set(!0),()=>x.set(!1),()=>E(),function(e){o=e,x.set(o)},function(e){v=e,a(2,v)}]}class ve extends e{constructor(e){super(),t(this,e,pe,fe,a,{guideId:0,guide:1})}}export{ve as default,me as load};
//# sourceMappingURL=index.svelte-339844ec.js.map
