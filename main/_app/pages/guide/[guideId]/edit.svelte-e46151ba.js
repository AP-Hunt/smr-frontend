import{S as s,i as a,s as e,W as t,X as r,e as n,t as o,k as i,j as u,c as d,a as c,g as m,d as f,n as g,m as p,b as l,f as $,a1 as h,o as k,u as j,w as v,x,Y as E,v as G,$ as b,Z as I,_ as w,a0 as y,r as S,h as P,a7 as T}from"../../../chunks/vendor-83c23bd8.js";import{p as q}from"../../../chunks/routing-405c8d47.js";import{E as L,s as N}from"../../../chunks/graphql-71bf8d51.js";import{T as O}from"../../../chunks/Toast-11f90e22.js";import{g as V}from"../../../chunks/navigation-2ffed81e.js";import{G as A}from"../../../chunks/GuideForm-68f6eae3.js";import"../../../chunks/singletons-12a22614.js";import"../../../chunks/forms-8d025218.js";import"../../../chunks/markdown-ac91d65c.js";function F(s){let a,e;return a=new A({props:{onSubmit:s[4],initialValues:s[2].data.getGuide,submitText:"Save"}}),{c(){u(a.$$.fragment)},l(s){p(a.$$.fragment,s)},m(s,t){k(a,s,t),e=!0},p(s,e){const t={};4&e&&(t.initialValues=s[2].data.getGuide),a.$set(t)},i(s){e||(x(a.$$.fragment,s),e=!0)},o(s){j(a.$$.fragment,s),e=!1},d(s){G(a,s)}}}function H(s){let a,e,t,r=s[2].error.message+"";return{c(){a=n("p"),e=o("Oh no... "),t=o(r)},l(s){a=d(s,"P",{});var n=c(a);e=m(n,"Oh no... "),t=m(n,r),n.forEach(f)},m(s,r){$(s,a,r),h(a,e),h(a,t)},p(s,a){4&a&&r!==(r=s[2].error.message+"")&&P(t,r)},i:T,o:T,d(s){s&&f(a)}}}function W(s){let a,e;return{c(){a=n("p"),e=o("Loading...")},l(s){a=d(s,"P",{});var t=c(a);e=m(t,"Loading..."),t.forEach(f)},m(s,t){$(s,a,t),h(a,e)},p:T,i:T,o:T,d(s){s&&f(a)}}}function X(s){let a,e;return{c(){a=n("span"),e=o(s[1])},l(t){a=d(t,"SPAN",{});var r=c(a);e=m(r,s[1]),r.forEach(f)},m(s,t){$(s,a,t),h(a,e)},p(s,a){2&a&&P(e,s[1])},d(s){s&&f(a)}}}function Y(s){let a,e,b,I,w,y,P,T,q;const L=[W,H,F],N=[];function V(s,a){return s[2].fetching?0:s[2].error?1:2}function A(a){s[6](a)}I=V(s),w=N[I]=L[I](s);let Y={$$slots:{default:[X]},$$scope:{ctx:s}};return void 0!==s[0]&&(Y.running=s[0]),P=new O({props:Y}),t.push((()=>r(P,"running",A))),{c(){a=n("h1"),e=o("Edit Guide"),b=i(),w.c(),y=i(),u(P.$$.fragment),this.h()},l(s){a=d(s,"H1",{class:!0});var t=c(a);e=m(t,"Edit Guide"),t.forEach(f),b=g(s),w.l(s),y=g(s),p(P.$$.fragment,s),this.h()},h(){l(a,"class","text-4xl my-4 font-bold")},m(s,t){$(s,a,t),h(a,e),$(s,b,t),N[I].m(s,t),$(s,y,t),k(P,s,t),q=!0},p(s,[a]){let e=I;I=V(s),I===e?N[I].p(s,a):(S(),j(N[e],1,1,(()=>{N[e]=null})),v(),w=N[I],w?w.p(s,a):(w=N[I]=L[I](s),w.c()),x(w,1),w.m(y.parentNode,y));const t={};258&a&&(t.$$scope={dirty:a,ctx:s}),!T&&1&a&&(T=!0,t.running=s[0],E((()=>T=!1))),P.$set(t)},i(s){q||(x(w),x(P.$$.fragment,s),q=!0)},o(s){j(w),j(P.$$.fragment,s),q=!1},d(s){s&&f(a),s&&f(b),N[I].d(s),s&&f(y),G(P,s)}}}const Z=q();function _(s,a,e){let t,{guideId:r}=a,n="",o=!1;const i=b(N,{guide:r});I(s,i,(s=>e(2,t=s)));const u=w({query:L});return y(i),s.$$set=s=>{"guideId"in s&&e(5,r=s.guideId)},s.$$.update=()=>{1&s.$$.dirty&&(o||e(1,n=""))},[o,n,t,i,s=>{u({guideId:r,guide:s}).then((s=>{s.error?(console.error(s.error.message),e(1,n="Error editing guide: "+s.error.message),e(0,o=!0)):V("/guide/"+s.data.updateGuide.id)}))},r,function(s){o=s,e(0,o)}]}class z extends s{constructor(s){super(),a(this,s,_,Y,e,{guideId:5})}}export{z as default,Z as load};
