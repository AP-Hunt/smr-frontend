import{S as s,i as a,s as t,W as r,X as e,e as n,t as o,k as i,j as u,c as d,a as c,g as m,d as f,n as g,m as p,b as l,f as $,a2 as h,o as k,u as b,w as j,x as v,Y as x,v as E,_ as G,Z as I,a1 as w,$ as y,r as S,h as P,a8 as T}from"../../../chunks/vendor-d3bf6e8b.js";import{p as q}from"../../../chunks/routing-405c8d47.js";import{E as L,s as N}from"../../../chunks/graphql-7b224d75.js";import{T as O}from"../../../chunks/Toast-ae4bd24a.js";import{g as V}from"../../../chunks/navigation-2ffed81e.js";import{G as A}from"../../../chunks/GuideForm-d111bb6d.js";import{b as F}from"../../../chunks/paths-6758d194.js";import"../../../chunks/singletons-12a22614.js";import"../../../chunks/forms-8d025218.js";import"../../../chunks/markdown-129d1c4f.js";function H(s){let a,t;return a=new A({props:{onSubmit:s[4],initialValues:s[2].data.getGuide,submitText:"Save"}}),{c(){u(a.$$.fragment)},l(s){p(a.$$.fragment,s)},m(s,r){k(a,s,r),t=!0},p(s,t){const r={};4&t&&(r.initialValues=s[2].data.getGuide),a.$set(r)},i(s){t||(v(a.$$.fragment,s),t=!0)},o(s){b(a.$$.fragment,s),t=!1},d(s){E(a,s)}}}function W(s){let a,t,r,e=s[2].error.message+"";return{c(){a=n("p"),t=o("Oh no... "),r=o(e)},l(s){a=d(s,"P",{});var n=c(a);t=m(n,"Oh no... "),r=m(n,e),n.forEach(f)},m(s,e){$(s,a,e),h(a,t),h(a,r)},p(s,a){4&a&&e!==(e=s[2].error.message+"")&&P(r,e)},i:T,o:T,d(s){s&&f(a)}}}function X(s){let a,t;return{c(){a=n("p"),t=o("Loading...")},l(s){a=d(s,"P",{});var r=c(a);t=m(r,"Loading..."),r.forEach(f)},m(s,r){$(s,a,r),h(a,t)},p:T,i:T,o:T,d(s){s&&f(a)}}}function Y(s){let a,t;return{c(){a=n("span"),t=o(s[1])},l(r){a=d(r,"SPAN",{});var e=c(a);t=m(e,s[1]),e.forEach(f)},m(s,r){$(s,a,r),h(a,t)},p(s,a){2&a&&P(t,s[1])},d(s){s&&f(a)}}}function Z(s){let a,t,G,I,w,y,P,T,q;const L=[X,W,H],N=[];function V(s,a){return s[2].fetching?0:s[2].error?1:2}function A(a){s[6](a)}I=V(s),w=N[I]=L[I](s);let F={$$slots:{default:[Y]},$$scope:{ctx:s}};return void 0!==s[0]&&(F.running=s[0]),P=new O({props:F}),r.push((()=>e(P,"running",A))),{c(){a=n("h1"),t=o("Edit Guide"),G=i(),w.c(),y=i(),u(P.$$.fragment),this.h()},l(s){a=d(s,"H1",{class:!0});var r=c(a);t=m(r,"Edit Guide"),r.forEach(f),G=g(s),w.l(s),y=g(s),p(P.$$.fragment,s),this.h()},h(){l(a,"class","text-4xl my-4 font-bold")},m(s,r){$(s,a,r),h(a,t),$(s,G,r),N[I].m(s,r),$(s,y,r),k(P,s,r),q=!0},p(s,[a]){let t=I;I=V(s),I===t?N[I].p(s,a):(S(),b(N[t],1,1,(()=>{N[t]=null})),j(),w=N[I],w?w.p(s,a):(w=N[I]=L[I](s),w.c()),v(w,1),w.m(y.parentNode,y));const r={};258&a&&(r.$$scope={dirty:a,ctx:s}),!T&&1&a&&(T=!0,r.running=s[0],x((()=>T=!1))),P.$set(r)},i(s){q||(v(w),v(P.$$.fragment,s),q=!0)},o(s){b(w),b(P.$$.fragment,s),q=!1},d(s){s&&f(a),s&&f(G),N[I].d(s),s&&f(y),E(P,s)}}}const _=q();function z(s,a,t){let r,{guideId:e}=a,n="",o=!1;const i=G(N,{guide:e});I(s,i,(s=>t(2,r=s)));const u=w({query:L});return y(i),s.$$set=s=>{"guideId"in s&&t(5,e=s.guideId)},s.$$.update=()=>{1&s.$$.dirty&&(o||t(1,n=""))},[o,n,r,i,s=>{u({guideId:e,guide:s}).then((s=>{s.error?(console.error(s.error.message),t(1,n="Error editing guide: "+s.error.message),t(0,o=!0)):V(F+"/guide/"+s.data.updateGuide.id)}))},e,function(s){o=s,t(0,o)}]}class B extends s{constructor(s){super(),a(this,s,z,Z,t,{guideId:5})}}export{B as default,_ as load};
