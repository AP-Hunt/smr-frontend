import{S as e,i as s,s as t,W as a,I as r,J as n,l as o,k as i,e as u,t as d,j as c,Z as m,d as f,n as l,c as g,a as p,g as h,m as $,b as k,Q as j,f as v,o as E,u as b,w as x,x as G,K as I,v as S,M as w,L as y,P as N,N as P,r as L,h as T}from"../../../chunks/vendor-9ef56761.js";import{p as q}from"../../../chunks/routing-1d144003.js";import{r as M,E as O}from"../../../chunks/graphql-7c12eb8b.js";import{T as V}from"../../../chunks/Toast-70852bff.js";import{g as A}from"../../../chunks/navigation-51f4a605.js";import{G as F}from"../../../chunks/GuideForm-354ee773.js";import{b as H}from"../../../chunks/paths-6758d194.js";import"../../../chunks/singletons-12a22614.js";import"../../../chunks/forms-8d025218.js";import"../../../chunks/markdown-f46c64ca.js";function J(e){return document.title=e[2].data.getGuide.name+" - SMR",{c:a,l:a,m:a,d:a}}function K(e){let s,t;return s=new F({props:{onSubmit:e[4],initialValues:e[2].data.getGuide,submitText:"Save"}}),{c(){c(s.$$.fragment)},l(e){$(s.$$.fragment,e)},m(e,a){E(s,e,a),t=!0},p(e,t){const a={};4&t&&(a.initialValues=e[2].data.getGuide),s.$set(a)},i(e){t||(G(s.$$.fragment,e),t=!0)},o(e){b(s.$$.fragment,e),t=!1},d(e){S(s,e)}}}function Q(e){let s,t,r,n=e[2].error.message+"";return{c(){s=u("p"),t=d("Oh no... "),r=d(n)},l(e){s=g(e,"P",{});var a=p(s);t=h(a,"Oh no... "),r=h(a,n),a.forEach(f)},m(e,a){v(e,s,a),j(s,t),j(s,r)},p(e,s){4&s&&n!==(n=e[2].error.message+"")&&T(r,n)},i:a,o:a,d(e){e&&f(s)}}}function R(e){let s,t;return{c(){s=u("p"),t=d("Loading...")},l(e){s=g(e,"P",{});var a=p(s);t=h(a,"Loading..."),a.forEach(f)},m(e,a){v(e,s,a),j(s,t)},p:a,i:a,o:a,d(e){e&&f(s)}}}function W(e){let s,t;return{c(){s=u("span"),t=d(e[1])},l(a){s=g(a,"SPAN",{});var r=p(s);t=h(r,e[1]),r.forEach(f)},m(e,a){v(e,s,a),j(s,t)},p(e,s){2&s&&T(t,e[1])},d(e){e&&f(s)}}}function Z(e){let s,t,a,w,y,N,P,T,q,M,O,A=!e[2].fetching&&!e[2].error&&J(e);const F=[R,Q,K],H=[];function Z(e,s){return e[2].fetching?0:e[2].error?1:2}function z(s){e[6](s)}N=Z(e),P=H[N]=F[N](e);let B={$$slots:{default:[W]},$$scope:{ctx:e}};return void 0!==e[0]&&(B.running=e[0]),q=new V({props:B}),r.push((()=>n(q,"running",z))),{c(){A&&A.c(),s=o(),t=i(),a=u("h1"),w=d("Edit Guide"),y=i(),P.c(),T=i(),c(q.$$.fragment),this.h()},l(e){const r=m('[data-svelte="svelte-t0r2pf"]',document.head);A&&A.l(r),s=o(),r.forEach(f),t=l(e),a=g(e,"H1",{class:!0});var n=p(a);w=h(n,"Edit Guide"),n.forEach(f),y=l(e),P.l(e),T=l(e),$(q.$$.fragment,e),this.h()},h(){k(a,"class","text-4xl my-4 font-bold")},m(e,r){A&&A.m(document.head,null),j(document.head,s),v(e,t,r),v(e,a,r),j(a,w),v(e,y,r),H[N].m(e,r),v(e,T,r),E(q,e,r),O=!0},p(e,[t]){e[2].fetching||e[2].error?A&&(A.d(1),A=null):A||(A=J(e),A.c(),A.m(s.parentNode,s));let a=N;N=Z(e),N===a?H[N].p(e,t):(L(),b(H[a],1,1,(()=>{H[a]=null})),x(),P=H[N],P?P.p(e,t):(P=H[N]=F[N](e),P.c()),G(P,1),P.m(T.parentNode,T));const r={};258&t&&(r.$$scope={dirty:t,ctx:e}),!M&&1&t&&(M=!0,r.running=e[0],I((()=>M=!1))),q.$set(r)},i(e){O||(G(P),G(q.$$.fragment,e),O=!0)},o(e){b(P),b(q.$$.fragment,e),O=!1},d(e){A&&A.d(e),f(s),e&&f(t),e&&f(a),e&&f(y),H[N].d(e),e&&f(T),S(q,e)}}}const z=q();function B(e,s,t){let a,{guideId:r}=s,n="",o=!1;const i=w(M,{guide:r});y(e,i,(e=>t(2,a=e)));const u=N({query:O});return P(i),e.$$set=e=>{"guideId"in e&&t(5,r=e.guideId)},e.$$.update=()=>{1&e.$$.dirty&&(o||t(1,n=""))},[o,n,a,i,e=>{u({guideId:r,guide:e}).then((e=>{e.error?(console.error(e.error.message),t(1,n="Error editing guide: "+e.error.message),t(0,o=!0)):A(H+"/guide/"+e.data.updateGuide.id)}))},r,function(e){o=e,t(0,o)}]}class C extends e{constructor(e){super(),s(this,e,B,Z,t,{guideId:5})}}export{C as default,z as load};
//# sourceMappingURL=edit.svelte-d5b23741.js.map
