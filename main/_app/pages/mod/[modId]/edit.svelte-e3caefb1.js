import{S as t,i as s,s as a,X as o,J as n,K as r,l as e,k as d,e as c,t as i,j as m,$ as u,d as l,n as f,c as p,a as g,g as h,m as $,b as v,R as j,f as b,o as k,u as M,w as E,x,L as y,v as I,N as O,M as S,Q as w,O as N,r as L,h as P}from"../../../chunks/vendor-ecacde99.js";import{p as T}from"../../../chunks/routing-1d144003.js";import{v as q,J}from"../../../chunks/graphql-7c12eb8b.js";import{T as R}from"../../../chunks/Toast-1c3d573d.js";import{g as V}from"../../../chunks/navigation-51f4a605.js";import{M as A}from"../../../chunks/ModForm-c042bab6.js";import{b as F}from"../../../chunks/paths-6758d194.js";import"../../../chunks/singletons-12a22614.js";import"../../../chunks/forms-8d025218.js";import"../../../chunks/markdown-58cc1c31.js";function H(t){return document.title="Edit Mod: "+t[1].data.getMod.name+" - SMR",{c:o,l:o,m:o,d:o}}function K(t){let s,a;return s=new A({props:{onSubmit:t[5],initialValues:t[3],editing:!0,submitText:"Save"}}),{c(){m(s.$$.fragment)},l(t){$(s.$$.fragment,t)},m(t,o){k(s,t,o),a=!0},p(t,a){const o={};8&a&&(o.initialValues=t[3]),s.$set(o)},i(t){a||(x(s.$$.fragment,t),a=!0)},o(t){M(s.$$.fragment,t),a=!1},d(t){I(s,t)}}}function Q(t){let s,a,n,r=t[1].error.message+"";return{c(){s=c("p"),a=i("Oh no... "),n=i(r)},l(t){s=p(t,"P",{});var o=g(s);a=h(o,"Oh no... "),n=h(o,r),o.forEach(l)},m(t,o){b(t,s,o),j(s,a),j(s,n)},p(t,s){2&s&&r!==(r=t[1].error.message+"")&&P(n,r)},i:o,o:o,d(t){t&&l(s)}}}function X(t){let s,a;return{c(){s=c("p"),a=i("Loading...")},l(t){s=p(t,"P",{});var o=g(s);a=h(o,"Loading..."),o.forEach(l)},m(t,o){b(t,s,o),j(s,a)},p:o,i:o,o:o,d(t){t&&l(s)}}}function z(t){let s,a;return{c(){s=c("span"),a=i(t[2])},l(o){s=p(o,"SPAN",{});var n=g(s);a=h(n,t[2]),n.forEach(l)},m(t,o){b(t,s,o),j(s,a)},p(t,s){4&s&&P(a,t[2])},d(t){t&&l(s)}}}function B(t){let s,a,o,O,S,w,N,P,T,q,J,V=!t[1].fetching&&!t[1].error&&t[1].data.getMod&&H(t);const A=[X,Q,K],F=[];function B(t,s){return t[1].fetching?0:t[1].error?1:2}function C(s){t[7](s)}w=B(t),N=F[w]=A[w](t);let D={$$slots:{default:[z]},$$scope:{ctx:t}};return void 0!==t[0]&&(D.running=t[0]),T=new R({props:D}),n.push((()=>r(T,"running",C))),{c(){V&&V.c(),s=e(),a=d(),o=c("h1"),O=i("Edit Mod"),S=d(),N.c(),P=d(),m(T.$$.fragment),this.h()},l(t){const n=u('[data-svelte="svelte-pmulbd"]',document.head);V&&V.l(n),s=e(),n.forEach(l),a=f(t),o=p(t,"H1",{class:!0});var r=g(o);O=h(r,"Edit Mod"),r.forEach(l),S=f(t),N.l(t),P=f(t),$(T.$$.fragment,t),this.h()},h(){v(o,"class","text-4xl my-4 font-bold")},m(t,n){V&&V.m(document.head,null),j(document.head,s),b(t,a,n),b(t,o,n),j(o,O),b(t,S,n),F[w].m(t,n),b(t,P,n),k(T,t,n),J=!0},p(t,[a]){t[1].fetching||t[1].error||!t[1].data.getMod?V&&(V.d(1),V=null):V||(V=H(t),V.c(),V.m(s.parentNode,s));let o=w;w=B(t),w===o?F[w].p(t,a):(L(),M(F[o],1,1,(()=>{F[o]=null})),E(),N=F[w],N?N.p(t,a):(N=F[w]=A[w](t),N.c()),x(N,1),N.m(P.parentNode,P));const n={};516&a&&(n.$$scope={dirty:a,ctx:t}),!q&&1&a&&(q=!0,n.running=t[0],y((()=>q=!1))),T.$set(n)},i(t){J||(x(N),x(T.$$.fragment,t),J=!0)},o(t){M(N),M(T.$$.fragment,t),J=!1},d(t){V&&V.d(t),l(s),t&&l(a),t&&l(o),t&&l(S),F[w].d(t),t&&l(P),I(T,t)}}}const C=T();function D(t,s,a){let o,n,{modId:r}=s,e="",d=!1;const c=O(q,{mod:r});S(t,c,(t=>a(1,n=t)));const i=w({query:J});return N(c),t.$$set=t=>{"modId"in t&&a(6,r=t.modId)},t.$$.update=()=>{1&t.$$.dirty&&(d||a(2,e="")),2&t.$$.dirty&&a(3,o=n.data?Object.assign(Object.assign({},n.data.getMod),{logo:void 0}):void 0)},[d,n,e,o,c,t=>{i({modId:r,mod:t}).then((t=>{t.error?(console.error(t.error.message),a(2,e="Error editing mod: "+t.error.message),a(0,d=!0)):V(F+"/mod/"+t.data.updateMod.id)}))},r,function(t){d=t,a(0,d)}]}class G extends t{constructor(t){super(),s(this,t,D,B,a,{modId:6})}}export{G as default,C as load};
//# sourceMappingURL=edit.svelte-e3caefb1.js.map
