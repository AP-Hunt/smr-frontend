import{S as n,i as s,s as t,X as r,J as e,K as o,l as a,k as i,e as c,t as d,j as u,$ as m,d as f,n as l,c as h,a as p,g,m as $,b as v,R as j,f as k,o as b,u as V,w as x,x as I,L as E,v as w,N as y,M as O,Q as S,O as N,r as P,h as L}from"../../../../../chunks/vendor-ecacde99.js";import{p as T}from"../../../../../chunks/routing-1d144003.js";import{B as q,I as M}from"../../../../../chunks/graphql-7c12eb8b.js";import{T as R}from"../../../../../chunks/Toast-1c3d573d.js";import{g as _}from"../../../../../chunks/navigation-51f4a605.js";import{V as A}from"../../../../../chunks/VersionForm-dfc34acd.js";import{b as B}from"../../../../../chunks/paths-6758d194.js";import"../../../../../chunks/singletons-12a22614.js";import"../../../../../chunks/uplugin-25072ff1.js";import"../../../../../chunks/api-82c76902.js";import"../../../../../chunks/user-bb5babe5.js";import"../../../../../chunks/forms-8d025218.js";import"../../../../../chunks/markdown-58cc1c31.js";function F(n){return document.title="Edit "+n[1].data.getVersion.mod.name+" "+n[1].data.getVersion.version+" - SMR",{c:r,l:r,m:r,d:r}}function H(n){let s,t;return s=new A({props:{onSubmit:n[5],initialValues:n[3],editing:!0,submitText:"Save"}}),{c(){u(s.$$.fragment)},l(n){$(s.$$.fragment,n)},m(n,r){b(s,n,r),t=!0},p(n,t){const r={};8&t&&(r.initialValues=n[3]),s.$set(r)},i(n){t||(I(s.$$.fragment,n),t=!0)},o(n){V(s.$$.fragment,n),t=!1},d(n){w(s,n)}}}function J(n){let s,t,e,o=n[1].error.message+"";return{c(){s=c("p"),t=d("Oh no... "),e=d(o)},l(n){s=h(n,"P",{});var r=p(s);t=g(r,"Oh no... "),e=g(r,o),r.forEach(f)},m(n,r){k(n,s,r),j(s,t),j(s,e)},p(n,s){2&s&&o!==(o=n[1].error.message+"")&&L(e,o)},i:r,o:r,d(n){n&&f(s)}}}function K(n){let s,t;return{c(){s=c("p"),t=d("Loading...")},l(n){s=h(n,"P",{});var r=p(s);t=g(r,"Loading..."),r.forEach(f)},m(n,r){k(n,s,r),j(s,t)},p:r,i:r,o:r,d(n){n&&f(s)}}}function Q(n){let s,t;return{c(){s=c("span"),t=d(n[2])},l(r){s=h(r,"SPAN",{});var e=p(s);t=g(e,n[2]),e.forEach(f)},m(n,r){k(n,s,r),j(s,t)},p(n,s){4&s&&L(t,n[2])},d(n){n&&f(s)}}}function X(n){let s,t,r,y,O,S,N,L,T,q,M,_=!n[1].fetching&&!n[1].error&&n[1].data.getVersion&&F(n);const A=[K,J,H],B=[];function X(n,s){return n[1].fetching?0:n[1].error?1:2}function z(s){n[8](s)}S=X(n),N=B[S]=A[S](n);let C={$$slots:{default:[Q]},$$scope:{ctx:n}};return void 0!==n[0]&&(C.running=n[0]),T=new R({props:C}),e.push((()=>o(T,"running",z))),{c(){_&&_.c(),s=a(),t=i(),r=c("h1"),y=d("Edit Version"),O=i(),N.c(),L=i(),u(T.$$.fragment),this.h()},l(n){const e=m('[data-svelte="svelte-1maeb5h"]',document.head);_&&_.l(e),s=a(),e.forEach(f),t=l(n),r=h(n,"H1",{class:!0});var o=p(r);y=g(o,"Edit Version"),o.forEach(f),O=l(n),N.l(n),L=l(n),$(T.$$.fragment,n),this.h()},h(){v(r,"class","text-4xl my-4 font-bold")},m(n,e){_&&_.m(document.head,null),j(document.head,s),k(n,t,e),k(n,r,e),j(r,y),k(n,O,e),B[S].m(n,e),k(n,L,e),b(T,n,e),M=!0},p(n,[t]){n[1].fetching||n[1].error||!n[1].data.getVersion?_&&(_.d(1),_=null):_||(_=F(n),_.c(),_.m(s.parentNode,s));let r=S;S=X(n),S===r?B[S].p(n,t):(P(),V(B[r],1,1,(()=>{B[r]=null})),x(),N=B[S],N?N.p(n,t):(N=B[S]=A[S](n),N.c()),I(N,1),N.m(L.parentNode,L));const e={};2052&t&&(e.$$scope={dirty:t,ctx:n}),!q&&1&t&&(q=!0,e.running=n[0],E((()=>q=!1))),T.$set(e)},i(n){M||(I(N),I(T.$$.fragment,n),M=!0)},o(n){V(N),V(T.$$.fragment,n),M=!1},d(n){_&&_.d(n),f(s),n&&f(t),n&&f(r),n&&f(O),B[S].d(n),n&&f(L),w(T,n)}}}const z=T();function C(n,s,t){let r,e;var o=this&&this.__awaiter||function(n,s,t,r){return new(t||(t=Promise))((function(e,o){function a(n){try{c(r.next(n))}catch(s){o(s)}}function i(n){try{c(r.throw(n))}catch(s){o(s)}}function c(n){var s;n.done?e(n.value):(s=n.value,s instanceof t?s:new t((function(n){n(s)}))).then(a,i)}c((r=r.apply(n,s||[])).next())}))};let{modId:a}=s,{versionId:i}=s,c="",d=!1;const u=y(q,{version:i});O(n,u,(n=>t(1,e=n)));const m=S({query:M});return N(u),n.$$set=n=>{"modId"in n&&t(6,a=n.modId),"versionId"in n&&t(7,i=n.versionId)},n.$$.update=()=>{1&n.$$.dirty&&(d||t(2,c="")),2&n.$$.dirty&&t(3,r=e.data?Object.assign(Object.assign({},e.data.getVersion),{logo:void 0}):void 0)},[d,e,c,r,u,n=>o(void 0,void 0,void 0,(function*(){return m({versionId:i,version:n}).then((n=>{if(!n.error)return _(B+"/mod/"+a+"/version/"+i);console.error(n.error.message),t(2,c="Error editing version: "+n.error.message),t(0,d=!0)}))})),a,i,function(n){d=n,t(0,d)}]}class D extends n{constructor(n){super(),s(this,n,C,X,t,{modId:6,versionId:7})}}export{D as default,z as load};
//# sourceMappingURL=edit.svelte-f90794bd.js.map
