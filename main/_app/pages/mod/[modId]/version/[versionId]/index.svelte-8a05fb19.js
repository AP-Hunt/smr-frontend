import{S as s,i as a,s as r,aw as e,e as o,c as n,a as t,d as c,b as l,f as i,ax as d,a8 as h,t as u,k as f,g,n as m,a2 as p,h as v,l as $,u as b,w as E,x,Z as w,_ as k,a1 as V,$ as y,r as I,C as S,a7 as D,a9 as N,a3 as T,ap as A,W as j,X as O,j as P,m as R,o as B,Y as H,v as C}from"../../../../../chunks/vendor-d3bf6e8b.js";import{p as G}from"../../../../../chunks/routing-405c8d47.js";import{B as L,H as _}from"../../../../../chunks/graphql-7b224d75.js";import{m as z}from"../../../../../chunks/markdown-129d1c4f.js";import{b as M}from"../../../../../chunks/sha256-88abbcfe.js";import{a as U}from"../../../../../chunks/user-679d7474.js";import{T as q}from"../../../../../chunks/Toast-ae4bd24a.js";import{D as W}from"../../../../../chunks/Dialog-e9a4a2ae.js";import{g as X}from"../../../../../chunks/navigation-2ffed81e.js";import{b as Y}from"../../../../../chunks/paths-6758d194.js";import"../../../../../chunks/singletons-12a22614.js";function Z(s){return{c:h,l:h,m:h,p:h,d:h}}function F(s){let a,r=s[1]+"";return{c(){a=o("p")},l(s){a=n(s,"P",{}),t(a).forEach(c)},m(s,e){i(s,a,e),a.innerHTML=r},p(s,e){1&e&&r!==(r=s[1]+"")&&(a.innerHTML=r)},d(s){s&&c(a)}}}function J(s){return{c:h,l:h,m:h,p:h,d:h}}function K(s){let a,r,u={ctx:s,current:null,token:null,hasCatch:!1,pending:J,then:F,catch:Z,value:1};return e(r=z(s[0]),u),{c(){a=o("div"),u.block.c(),this.h()},l(s){a=n(s,"DIV",{class:!0});var r=t(a);u.block.l(r),r.forEach(c),this.h()},h(){l(a,"class","markdown-content")},m(s,r){i(s,a,r),u.block.m(a,u.anchor=null),u.mount=()=>a,u.anchor=null},p(a,[o]){s=a,u.ctx=s,1&o&&r!==(r=z(s[0]))&&e(r,u)||d(u,s,o)},i:h,o:h,d(s){s&&c(a),u.block.d(),u.token=null,u=null}}}function Q(s,a,r){let{changelog:e}=a;return s.$$set=s=>{"changelog"in s&&r(0,e=s.changelog)},[e]}class ss extends s{constructor(s){super(),a(this,s,Q,K,r,{changelog:0})}}function as(s){let a,r,e,d,$,b,E,x,w,k,V,y,I,S,D,N,T,A,j,O,P,R,B,H,C,G,L,_,z,M,U,q,W,X,Y,Z,F,J,K,Q,ss,as,rs,es,os=s[0].created_at+"",ns=s[0].downloads+"",ts=s[0].sml_version+"",cs=s[0].stability+"",ls=s[0].size+"",is=s[0].hash+"";return{c(){a=o("div"),r=o("h3"),e=u("Info"),d=f(),$=o("span"),b=o("strong"),E=u("Created:"),x=f(),w=u(os),k=o("br"),V=f(),y=o("span"),I=o("strong"),S=u("Downloads:"),D=f(),N=u(ns),T=o("br"),A=f(),j=o("span"),O=o("strong"),P=u("SML Version:"),R=f(),B=u(ts),H=o("br"),C=f(),G=o("span"),L=o("strong"),_=u("Stability:"),z=f(),M=u(cs),U=o("br"),q=f(),W=o("span"),X=o("strong"),Y=u("Size:"),Z=f(),F=u(ls),J=o("br"),K=f(),Q=o("span"),ss=o("strong"),as=u("Hash:"),rs=f(),es=u(is),this.h()},l(s){a=n(s,"DIV",{class:!0});var o=t(a);r=n(o,"H3",{class:!0});var l=t(r);e=g(l,"Info"),l.forEach(c),d=m(o),$=n(o,"SPAN",{});var i=t($);b=n(i,"STRONG",{});var h=t(b);E=g(h,"Created:"),h.forEach(c),x=m(i),w=g(i,os),i.forEach(c),k=n(o,"BR",{}),V=m(o),y=n(o,"SPAN",{});var u=t(y);I=n(u,"STRONG",{});var f=t(I);S=g(f,"Downloads:"),f.forEach(c),D=m(u),N=g(u,ns),u.forEach(c),T=n(o,"BR",{}),A=m(o),j=n(o,"SPAN",{});var p=t(j);O=n(p,"STRONG",{});var v=t(O);P=g(v,"SML Version:"),v.forEach(c),R=m(p),B=g(p,ts),p.forEach(c),H=n(o,"BR",{}),C=m(o),G=n(o,"SPAN",{});var ds=t(G);L=n(ds,"STRONG",{});var hs=t(L);_=g(hs,"Stability:"),hs.forEach(c),z=m(ds),M=g(ds,cs),ds.forEach(c),U=n(o,"BR",{}),q=m(o),W=n(o,"SPAN",{});var us=t(W);X=n(us,"STRONG",{});var fs=t(X);Y=g(fs,"Size:"),fs.forEach(c),Z=m(us),F=g(us,ls),us.forEach(c),J=n(o,"BR",{}),K=m(o),Q=n(o,"SPAN",{});var gs=t(Q);ss=n(gs,"STRONG",{});var ms=t(ss);as=g(ms,"Hash:"),ms.forEach(c),rs=m(gs),es=g(gs,is),gs.forEach(c),o.forEach(c),this.h()},h(){l(r,"class","text-2xl my-4 font-bold"),l(a,"class","text-lg")},m(s,o){i(s,a,o),p(a,r),p(r,e),p(a,d),p(a,$),p($,b),p(b,E),p($,x),p($,w),p(a,k),p(a,V),p(a,y),p(y,I),p(I,S),p(y,D),p(y,N),p(a,T),p(a,A),p(a,j),p(j,O),p(O,P),p(j,R),p(j,B),p(a,H),p(a,C),p(a,G),p(G,L),p(L,_),p(G,z),p(G,M),p(a,U),p(a,q),p(a,W),p(W,X),p(X,Y),p(W,Z),p(W,F),p(a,J),p(a,K),p(a,Q),p(Q,ss),p(ss,as),p(Q,rs),p(Q,es)},p(s,[a]){1&a&&os!==(os=s[0].created_at+"")&&v(w,os),1&a&&ns!==(ns=s[0].downloads+"")&&v(N,ns),1&a&&ts!==(ts=s[0].sml_version+"")&&v(B,ts),1&a&&cs!==(cs=s[0].stability+"")&&v(M,cs),1&a&&ls!==(ls=s[0].size+"")&&v(F,ls),1&a&&is!==(is=s[0].hash+"")&&v(es,is)},i:h,o:h,d(s){s&&c(a)}}}function rs(s,a,r){let{version:e}=a;return s.$$set=s=>{"version"in s&&r(0,e=s.version)},[e]}class es extends s{constructor(s){super(),a(this,s,rs,as,r,{version:0})}}function os(s){let a;return{c(){a=u("404")},l(s){a=g(s,"404")},m(s,r){i(s,a,r)},p:h,i:h,o:h,d(s){s&&c(a)}}}function ns(s){let a,r,e,d,h,$,E,w,k,V,y,I,S,D,N,G,L,_,z,U,X,Z,F,J,K,Q,as,rs,os,ns,ts,cs=s[2].data.getVersion.mod.name+"",hs=s[2].data.getVersion.version+"",us=s[5]&&ls(s);function fs(a){s[19](a)}z=new T({props:{icon:A,inline:!0,class:"inline-block"}}),X=new ss({props:{changelog:s[2].data.getVersion.changelog}}),J=new es({props:{version:s[2].data.getVersion}});let gs={$$slots:{default:[is]},$$scope:{ctx:s}};function ms(a){s[20](a)}void 0!==s[6]&&(gs.open=s[6]),Q=new W({props:gs}),j.push((()=>O(Q,"open",fs)));let ps={$$slots:{default:[ds]},$$scope:{ctx:s}};return void 0!==s[4]&&(ps.running=s[4]),os=new q({props:ps}),j.push((()=>O(os,"running",ms))),{c(){a=o("div"),r=o("div"),e=o("div"),d=o("h1"),h=u(cs),$=u(" Version "),E=u(hs),w=f(),k=o("div"),us&&us.c(),V=f(),y=o("a"),I=u("Download"),D=f(),N=o("a"),G=o("span"),L=u("Install"),_=f(),P(z.$$.fragment),U=f(),P(X.$$.fragment),Z=f(),F=o("div"),P(J.$$.fragment),K=f(),P(Q.$$.fragment),rs=f(),P(os.$$.fragment),this.h()},l(s){a=n(s,"DIV",{class:!0});var o=t(a);r=n(o,"DIV",{class:!0});var l=t(r);e=n(l,"DIV",{class:!0});var i=t(e);d=n(i,"H1",{class:!0});var u=t(d);h=g(u,cs),$=g(u," Version "),E=g(u,hs),u.forEach(c),w=m(i),k=n(i,"DIV",{class:!0});var f=t(k);us&&us.l(f),V=m(f),y=n(f,"A",{href:!0,class:!0});var p=t(y);I=g(p,"Download"),p.forEach(c),D=m(f),N=n(f,"A",{href:!0,class:!0});var v=t(N);G=n(v,"SPAN",{});var b=t(G);L=g(b,"Install"),b.forEach(c),_=m(v),R(z.$$.fragment,v),v.forEach(c),f.forEach(c),i.forEach(c),U=m(l),R(X.$$.fragment,l),l.forEach(c),Z=m(o),F=n(o,"DIV",{class:!0});var x=t(F);R(J.$$.fragment,x),x.forEach(c),o.forEach(c),K=m(s),R(Q.$$.fragment,s),rs=m(s),R(os.$$.fragment,s),this.h()},h(){l(d,"class","text-4xl my-4 font-bold"),l(y,"href",S=M+"/mod/"+s[0]+"/versions/"+s[1]+"/download"),l(y,"class","py-2 px-4 rounded text-base bg-green-600 text-center"),l(N,"href",Y),l(N,"class","py-2 px-4 rounded text-base bg-blue-600 text-center"),l(k,"class","grid grid-flow-col gap-4"),l(e,"class","grid grid-flow-col grid-auto-max h-auto items-center svelte-1ug5acc"),l(r,"class","grid grid-cols-1 auto-rows-min gap-8"),l(F,"class","grid grid-cols-1 auto-rows-min gap-8"),l(a,"class","grid gap-8 grid-auto-max svelte-1ug5acc")},m(s,o){i(s,a,o),p(a,r),p(r,e),p(e,d),p(d,h),p(d,$),p(d,E),p(e,w),p(e,k),us&&us.m(k,null),p(k,V),p(k,y),p(y,I),p(k,D),p(k,N),p(N,G),p(G,L),p(N,_),B(z,N,null),p(r,U),B(X,r,null),p(a,Z),p(a,F),B(J,F,null),i(s,K,o),B(Q,s,o),i(s,rs,o),B(os,s,o),ts=!0},p(s,a){(!ts||4&a)&&cs!==(cs=s[2].data.getVersion.mod.name+"")&&v(h,cs),(!ts||4&a)&&hs!==(hs=s[2].data.getVersion.version+"")&&v(E,hs),s[5]?us?us.p(s,a):(us=ls(s),us.c(),us.m(k,V)):us&&(us.d(1),us=null),(!ts||3&a&&S!==(S=M+"/mod/"+s[0]+"/versions/"+s[1]+"/download"))&&l(y,"href",S);const r={};4&a&&(r.changelog=s[2].data.getVersion.changelog),X.$set(r);const e={};4&a&&(e.version=s[2].data.getVersion),J.$set(e);const o={};4194304&a&&(o.$$scope={dirty:a,ctx:s}),!as&&64&a&&(as=!0,o.open=s[6],H((()=>as=!1))),Q.$set(o);const n={};4194312&a&&(n.$$scope={dirty:a,ctx:s}),!ns&&16&a&&(ns=!0,n.running=s[4],H((()=>ns=!1))),os.$set(n)},i(s){ts||(x(z.$$.fragment,s),x(X.$$.fragment,s),x(J.$$.fragment,s),x(Q.$$.fragment,s),x(os.$$.fragment,s),ts=!0)},o(s){b(z.$$.fragment,s),b(X.$$.fragment,s),b(J.$$.fragment,s),b(Q.$$.fragment,s),b(os.$$.fragment,s),ts=!1},d(s){s&&c(a),us&&us.d(),C(z),C(X),C(J),s&&c(K),C(Q,s),s&&c(rs),C(os,s)}}}function ts(s){let a,r,e,l=s[2].error.message+"";return{c(){a=o("p"),r=u("Oh no... "),e=u(l)},l(s){a=n(s,"P",{});var o=t(a);r=g(o,"Oh no... "),e=g(o,l),o.forEach(c)},m(s,o){i(s,a,o),p(a,r),p(a,e)},p(s,a){4&a&&l!==(l=s[2].error.message+"")&&v(e,l)},i:h,o:h,d(s){s&&c(a)}}}function cs(s){let a,r;return{c(){a=o("p"),r=u("Loading...")},l(s){a=n(s,"P",{});var e=t(a);r=g(e,"Loading..."),e.forEach(c)},m(s,e){i(s,a,e),p(a,r)},p:h,i:h,o:h,d(s){s&&c(a)}}}function ls(s){let a,r,e,d,v,$,b;return{c(){a=o("button"),r=u("Edit"),e=f(),d=o("button"),v=u("Delete"),this.h()},l(s){a=n(s,"BUTTON",{class:!0});var o=t(a);r=g(o,"Edit"),o.forEach(c),e=m(s),d=n(s,"BUTTON",{class:!0});var l=t(d);v=g(l,"Delete"),l.forEach(c),this.h()},h(){l(a,"class","py-2 px-4 rounded text-base bg-yellow-600"),l(d,"class","py-2 px-4 rounded text-base bg-red-500")},m(o,n){i(o,a,n),p(a,r),i(o,e,n),i(o,d,n),p(d,v),$||(b=[D(a,"click",s[15]),D(d,"click",s[16])],$=!0)},p:h,d(s){s&&c(a),s&&c(e),s&&c(d),$=!1,N(b)}}}function is(s){let a,r,e,d,v,$,b,E,x,w,k,V,y,I;return{c(){a=o("div"),r=o("h3"),e=u("Delete Version?"),d=f(),v=o("span"),$=u("Are you sure you wish to delete this version"),b=f(),E=o("button"),x=u("Cancel"),w=f(),k=o("button"),V=u("Delete"),this.h()},l(s){a=n(s,"DIV",{class:!0});var o=t(a);r=n(o,"H3",{class:!0});var l=t(r);e=g(l,"Delete Version?"),l.forEach(c),d=m(o),v=n(o,"SPAN",{});var i=t(v);$=g(i,"Are you sure you wish to delete this version"),i.forEach(c),b=m(o),E=n(o,"BUTTON",{class:!0});var h=t(E);x=g(h,"Cancel"),h.forEach(c),w=m(o),k=n(o,"BUTTON",{class:!0});var u=t(k);V=g(u,"Delete"),u.forEach(c),o.forEach(c),this.h()},h(){l(r,"class","text-2xl font-bold"),l(E,"class","py-1 px-4 rounded text-base bg-yellow-600"),l(k,"class","py-1 px-4 rounded text-base bg-red-500"),l(a,"class","grid grid-flow-row gap-4")},m(o,n){i(o,a,n),p(a,r),p(r,e),p(a,d),p(a,v),p(v,$),p(a,b),p(a,E),p(E,x),p(a,w),p(a,k),p(k,V),y||(I=[D(E,"click",s[17]),D(k,"click",s[18])],y=!0)},p:h,d(s){s&&c(a),y=!1,N(I)}}}function ds(s){let a,r;return{c(){a=o("span"),r=u(s[3])},l(e){a=n(e,"SPAN",{});var o=t(a);r=g(o,s[3]),o.forEach(c)},m(s,e){i(s,a,e),p(a,r)},p(s,a){8&a&&v(r,s[3])},d(s){s&&c(a)}}}function hs(s){let a,r,e,o;const n=[cs,ts,ns,os],t=[];function l(s,a){return s[2].fetching?0:s[2].error?1:s[2].data.getVersion?2:3}return a=l(s),r=t[a]=n[a](s),{c(){r.c(),e=$()},l(s){r.l(s),e=$()},m(s,r){t[a].m(s,r),i(s,e,r),o=!0},p(s,[o]){let c=a;a=l(s),a===c?t[a].p(s,o):(I(),b(t[c],1,1,(()=>{t[c]=null})),E(),r=t[a],r?r.p(s,o):(r=t[a]=n[a](s),r.c()),x(r,1),r.m(e.parentNode,e))},i(s){o||(x(r),o=!0)},o(s){b(r),o=!1},d(s){t[a].d(s),s&&c(e)}}}const us=G();function fs(s,a,r){let e,o,n,t;var c,l,i,d;w(s,U,(s=>r(14,o=s)));let{modId:h}=a,{versionId:u}=a,f="",g=!1;const m=k(_,{version:u});w(s,m,(s=>r(2,n=s)));const p=V({query:L}),v=S(!1);w(s,v,(s=>r(6,t=s)));const $=()=>{p({versionId:u}).then((s=>{s.error?(console.error(s.error.message),r(3,f="Error deleting version: "+s.error.message),r(4,g=!0)):X(Y+"/mod/"+h)}))};y(m);return s.$$set=s=>{"modId"in s&&r(0,h=s.modId),"versionId"in s&&r(1,u=s.versionId)},s.$$.update=()=>{31748&s.$$.dirty&&r(5,e=(null===r(10,c=null==o?void 0:o.roles)||void 0===c?void 0:c.deleteContent)||(null===r(13,d=null===r(12,i=null===r(11,l=null==n?void 0:n.data)||void 0===l?void 0:l.getVersion.mod)||void 0===i?void 0:i.authors)||void 0===d?void 0:d.findIndex((s=>s.user_id==(null==o?void 0:o.id))))>=0)},[h,u,n,f,g,e,t,m,v,$,c,l,i,d,o,()=>X(Y+"/mod/"+h+"/version/"+u+"/edit"),()=>v.set(!0),()=>v.set(!1),()=>$(),function(s){t=s,v.set(t)},function(s){g=s,r(4,g)}]}class gs extends s{constructor(s){super(),a(this,s,fs,hs,r,{modId:0,versionId:1})}}export{gs as default,us as load};
