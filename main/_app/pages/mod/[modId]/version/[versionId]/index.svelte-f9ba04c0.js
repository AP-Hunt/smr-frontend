import{S as e,i as s,s as n,al as a,e as r,c as o,a as t,d as c,b as i,f as l,am as d,X as u,t as h,k as f,g,n as m,R as v,h as p,N as $,l as b,$ as E,u as x,w,x as V,M as k,ac as y,Q as I,O as S,r as N,C as D,W as T,Y as j,T as A,af as O,J as P,K as R,j as B,m as H,o as C,L,v as G}from"../../../../../chunks/vendor-ecacde99.js";import{l as M}from"../../../../../chunks/gql-5f336112.js";import{B as _,H as z}from"../../../../../chunks/graphql-7c12eb8b.js";import{p as U}from"../../../../../chunks/routing-1d144003.js";import{m as q}from"../../../../../chunks/markdown-58cc1c31.js";import{b as J}from"../../../../../chunks/api-82c76902.js";import{a as K}from"../../../../../chunks/user-bb5babe5.js";import{T as Q}from"../../../../../chunks/Toast-1c3d573d.js";import{D as W}from"../../../../../chunks/Dialog-da2d79a0.js";import{g as X}from"../../../../../chunks/navigation-51f4a605.js";import{b as Y}from"../../../../../chunks/paths-6758d194.js";import"../../../../../chunks/singletons-12a22614.js";function F(e){return{c:u,l:u,m:u,p:u,d:u}}function Z(e){let s,n=e[1]+"";return{c(){s=r("p")},l(e){s=o(e,"P",{}),t(s).forEach(c)},m(e,a){l(e,s,a),s.innerHTML=n},p(e,a){1&a&&n!==(n=e[1]+"")&&(s.innerHTML=n)},d(e){e&&c(s)}}}function ee(e){return{c:u,l:u,m:u,p:u,d:u}}function se(e){let s,n,h={ctx:e,current:null,token:null,hasCatch:!1,pending:ee,then:Z,catch:F,value:1};return a(n=q(e[0]),h),{c(){s=r("div"),h.block.c(),this.h()},l(e){s=o(e,"DIV",{class:!0});var n=t(s);h.block.l(n),n.forEach(c),this.h()},h(){i(s,"class","markdown-content")},m(e,n){l(e,s,n),h.block.m(s,h.anchor=null),h.mount=()=>s,h.anchor=null},p(s,[r]){e=s,h.ctx=e,1&r&&n!==(n=q(e[0]))&&a(n,h)||d(h,e,r)},i:u,o:u,d(e){e&&c(s),h.block.d(),h.token=null,h=null}}}function ne(e,s,n){let{changelog:a}=s;return e.$$set=e=>{"changelog"in e&&n(0,a=e.changelog)},[a]}class ae extends e{constructor(e){super(),s(this,e,ne,se,n,{changelog:0})}}function re(e){let s,n,a,d,$,b,E,x,w,V,k,y,I,S,N,D,T,j,A,O,P,R,B,H,C,L,G,M,_,z,U,q,J,K,Q,W,X,Y,F,Z,ee,se,ne,ae,re=e[0].created_at+"",oe=e[0].downloads+"",te=e[0].sml_version+"",ce=e[0].stability+"",ie=e[0].size+"",le=e[0].hash+"";return{c(){s=r("div"),n=r("h3"),a=h("Info"),d=f(),$=r("span"),b=r("strong"),E=h("Created:"),x=f(),w=h(re),V=r("br"),k=f(),y=r("span"),I=r("strong"),S=h("Downloads:"),N=f(),D=h(oe),T=r("br"),j=f(),A=r("span"),O=r("strong"),P=h("SML Version:"),R=f(),B=h(te),H=r("br"),C=f(),L=r("span"),G=r("strong"),M=h("Stability:"),_=f(),z=h(ce),U=r("br"),q=f(),J=r("span"),K=r("strong"),Q=h("Size:"),W=f(),X=h(ie),Y=r("br"),F=f(),Z=r("span"),ee=r("strong"),se=h("Hash:"),ne=f(),ae=h(le),this.h()},l(e){s=o(e,"DIV",{class:!0});var r=t(s);n=o(r,"H3",{class:!0});var i=t(n);a=g(i,"Info"),i.forEach(c),d=m(r),$=o(r,"SPAN",{});var l=t($);b=o(l,"STRONG",{});var u=t(b);E=g(u,"Created:"),u.forEach(c),x=m(l),w=g(l,re),l.forEach(c),V=o(r,"BR",{}),k=m(r),y=o(r,"SPAN",{});var h=t(y);I=o(h,"STRONG",{});var f=t(I);S=g(f,"Downloads:"),f.forEach(c),N=m(h),D=g(h,oe),h.forEach(c),T=o(r,"BR",{}),j=m(r),A=o(r,"SPAN",{});var v=t(A);O=o(v,"STRONG",{});var p=t(O);P=g(p,"SML Version:"),p.forEach(c),R=m(v),B=g(v,te),v.forEach(c),H=o(r,"BR",{}),C=m(r),L=o(r,"SPAN",{});var de=t(L);G=o(de,"STRONG",{});var ue=t(G);M=g(ue,"Stability:"),ue.forEach(c),_=m(de),z=g(de,ce),de.forEach(c),U=o(r,"BR",{}),q=m(r),J=o(r,"SPAN",{});var he=t(J);K=o(he,"STRONG",{});var fe=t(K);Q=g(fe,"Size:"),fe.forEach(c),W=m(he),X=g(he,ie),he.forEach(c),Y=o(r,"BR",{}),F=m(r),Z=o(r,"SPAN",{});var ge=t(Z);ee=o(ge,"STRONG",{});var me=t(ee);se=g(me,"Hash:"),me.forEach(c),ne=m(ge),ae=g(ge,le),ge.forEach(c),r.forEach(c),this.h()},h(){i(n,"class","text-2xl my-4 font-bold"),i(s,"class","text-lg")},m(e,r){l(e,s,r),v(s,n),v(n,a),v(s,d),v(s,$),v($,b),v(b,E),v($,x),v($,w),v(s,V),v(s,k),v(s,y),v(y,I),v(I,S),v(y,N),v(y,D),v(s,T),v(s,j),v(s,A),v(A,O),v(O,P),v(A,R),v(A,B),v(s,H),v(s,C),v(s,L),v(L,G),v(G,M),v(L,_),v(L,z),v(s,U),v(s,q),v(s,J),v(J,K),v(K,Q),v(J,W),v(J,X),v(s,Y),v(s,F),v(s,Z),v(Z,ee),v(ee,se),v(Z,ne),v(Z,ae)},p(e,[s]){1&s&&re!==(re=e[0].created_at+"")&&p(w,re),1&s&&oe!==(oe=e[0].downloads+"")&&p(D,oe),1&s&&te!==(te=e[0].sml_version+"")&&p(B,te),1&s&&ce!==(ce=e[0].stability+"")&&p(z,ce),1&s&&ie!==(ie=e[0].size+"")&&p(X,ie),1&s&&le!==(le=e[0].hash+"")&&p(ae,le)},i:u,o:u,d(e){e&&c(s)}}}function oe(e,s,n){let{version:a}=s;return e.$$set=e=>{"version"in e&&n(0,a=e.version)},[a]}class te extends e{constructor(e){super(),s(this,e,oe,re,n,{version:0})}}function ce(e){return document.title=e[3].data.getVersion.mod.name+" "+e[3].data.getVersion.version+" - SMR",{c:u,l:u,m:u,d:u}}function ie(e){let s;return{c(){s=h("404")},l(e){s=g(e,"404")},m(e,n){l(e,s,n)},p:u,i:u,o:u,d(e){e&&c(s)}}}function le(e){let s,n,a,d,u,$,b,E,w,k,y,I,S,N,D,T,j,M,_,z,U,q,K,X,F,Z,ee,se,ne,re,oe,ce=e[3].data.getVersion.mod.name+"",ie=e[3].data.getVersion.version+"",le=e[6]&&he(e);function de(s){e[19](s)}_=new A({props:{icon:O,inline:!0,class:"inline-block"}}),U=new ae({props:{changelog:e[3].data.getVersion.changelog}}),X=new te({props:{version:e[3].data.getVersion}});let ue={$$slots:{default:[fe]},$$scope:{ctx:e}};function me(s){e[20](s)}void 0!==e[7]&&(ue.open=e[7]),Z=new W({props:ue}),P.push((()=>R(Z,"open",de)));let ve={$$slots:{default:[ge]},$$scope:{ctx:e}};return void 0!==e[5]&&(ve.running=e[5]),ne=new Q({props:ve}),P.push((()=>R(ne,"running",me))),{c(){s=r("div"),n=r("div"),a=r("div"),d=r("h1"),u=h(ce),$=h("\n            Version "),b=h(ie),E=f(),w=r("div"),le&&le.c(),k=f(),y=r("a"),I=h("Download"),N=f(),D=r("a"),T=r("span"),j=h("Install"),M=f(),B(_.$$.fragment),z=f(),B(U.$$.fragment),q=f(),K=r("div"),B(X.$$.fragment),F=f(),B(Z.$$.fragment),se=f(),B(ne.$$.fragment),this.h()},l(e){s=o(e,"DIV",{class:!0});var r=t(s);n=o(r,"DIV",{class:!0});var i=t(n);a=o(i,"DIV",{class:!0});var l=t(a);d=o(l,"H1",{class:!0});var h=t(d);u=g(h,ce),$=g(h,"\n            Version "),b=g(h,ie),h.forEach(c),E=m(l),w=o(l,"DIV",{class:!0});var f=t(w);le&&le.l(f),k=m(f),y=o(f,"A",{href:!0,class:!0});var v=t(y);I=g(v,"Download"),v.forEach(c),N=m(f),D=o(f,"A",{href:!0,class:!0});var p=t(D);T=o(p,"SPAN",{});var x=t(T);j=g(x,"Install"),x.forEach(c),M=m(p),H(_.$$.fragment,p),p.forEach(c),f.forEach(c),l.forEach(c),z=m(i),H(U.$$.fragment,i),i.forEach(c),q=m(r),K=o(r,"DIV",{class:!0});var V=t(K);H(X.$$.fragment,V),V.forEach(c),r.forEach(c),F=m(e),H(Z.$$.fragment,e),se=m(e),H(ne.$$.fragment,e),this.h()},h(){i(d,"class","text-4xl my-4 font-bold"),i(y,"href",S=J+"/mod/"+e[0]+"/versions/"+e[1]+"/download"),i(y,"class","py-2 px-4 rounded text-base bg-green-600 text-center"),i(D,"href",Y),i(D,"class","py-2 px-4 rounded text-base bg-blue-600 text-center"),i(w,"class","grid grid-flow-col gap-4"),i(a,"class","grid grid-flow-col grid-auto-max h-auto items-center svelte-1ug5acc"),i(n,"class","grid grid-cols-1 auto-rows-min gap-8"),i(K,"class","grid grid-cols-1 auto-rows-min gap-8"),i(s,"class","grid gap-8 grid-auto-max svelte-1ug5acc")},m(e,r){l(e,s,r),v(s,n),v(n,a),v(a,d),v(d,u),v(d,$),v(d,b),v(a,E),v(a,w),le&&le.m(w,null),v(w,k),v(w,y),v(y,I),v(w,N),v(w,D),v(D,T),v(T,j),v(D,M),C(_,D,null),v(n,z),C(U,n,null),v(s,q),v(s,K),C(X,K,null),l(e,F,r),C(Z,e,r),l(e,se,r),C(ne,e,r),oe=!0},p(e,s){(!oe||8&s)&&ce!==(ce=e[3].data.getVersion.mod.name+"")&&p(u,ce),(!oe||8&s)&&ie!==(ie=e[3].data.getVersion.version+"")&&p(b,ie),e[6]?le?le.p(e,s):(le=he(e),le.c(),le.m(w,k)):le&&(le.d(1),le=null),(!oe||3&s&&S!==(S=J+"/mod/"+e[0]+"/versions/"+e[1]+"/download"))&&i(y,"href",S);const n={};8&s&&(n.changelog=e[3].data.getVersion.changelog),U.$set(n);const a={};8&s&&(a.version=e[3].data.getVersion),X.$set(a);const r={};4194304&s&&(r.$$scope={dirty:s,ctx:e}),!ee&&128&s&&(ee=!0,r.open=e[7],L((()=>ee=!1))),Z.$set(r);const o={};4194320&s&&(o.$$scope={dirty:s,ctx:e}),!re&&32&s&&(re=!0,o.running=e[5],L((()=>re=!1))),ne.$set(o)},i(e){oe||(V(_.$$.fragment,e),V(U.$$.fragment,e),V(X.$$.fragment,e),V(Z.$$.fragment,e),V(ne.$$.fragment,e),oe=!0)},o(e){x(_.$$.fragment,e),x(U.$$.fragment,e),x(X.$$.fragment,e),x(Z.$$.fragment,e),x(ne.$$.fragment,e),oe=!1},d(e){e&&c(s),le&&le.d(),G(_),G(U),G(X),e&&c(F),G(Z,e),e&&c(se),G(ne,e)}}}function de(e){let s,n,a,i=e[3].error.message+"";return{c(){s=r("p"),n=h("Oh no... "),a=h(i)},l(e){s=o(e,"P",{});var r=t(s);n=g(r,"Oh no... "),a=g(r,i),r.forEach(c)},m(e,r){l(e,s,r),v(s,n),v(s,a)},p(e,s){8&s&&i!==(i=e[3].error.message+"")&&p(a,i)},i:u,o:u,d(e){e&&c(s)}}}function ue(e){let s,n;return{c(){s=r("p"),n=h("Loading...")},l(e){s=o(e,"P",{});var a=t(s);n=g(a,"Loading..."),a.forEach(c)},m(e,a){l(e,s,a),v(s,n)},p:u,i:u,o:u,d(e){e&&c(s)}}}function he(e){let s,n,a,d,p,$,b;return{c(){s=r("button"),n=h("Edit"),a=f(),d=r("button"),p=h("Delete"),this.h()},l(e){s=o(e,"BUTTON",{class:!0});var r=t(s);n=g(r,"Edit"),r.forEach(c),a=m(e),d=o(e,"BUTTON",{class:!0});var i=t(d);p=g(i,"Delete"),i.forEach(c),this.h()},h(){i(s,"class","py-2 px-4 rounded text-base bg-yellow-600"),i(d,"class","py-2 px-4 rounded text-base bg-red-500")},m(r,o){l(r,s,o),v(s,n),l(r,a,o),l(r,d,o),v(d,p),$||(b=[T(s,"click",e[15]),T(d,"click",e[16])],$=!0)},p:u,d(e){e&&c(s),e&&c(a),e&&c(d),$=!1,j(b)}}}function fe(e){let s,n,a,d,p,$,b,E,x,w,V,k,y,I;return{c(){s=r("div"),n=r("h3"),a=h("Delete Version?"),d=f(),p=r("span"),$=h("Are you sure you wish to delete this version"),b=f(),E=r("button"),x=h("Cancel"),w=f(),V=r("button"),k=h("Delete"),this.h()},l(e){s=o(e,"DIV",{class:!0});var r=t(s);n=o(r,"H3",{class:!0});var i=t(n);a=g(i,"Delete Version?"),i.forEach(c),d=m(r),p=o(r,"SPAN",{});var l=t(p);$=g(l,"Are you sure you wish to delete this version"),l.forEach(c),b=m(r),E=o(r,"BUTTON",{class:!0});var u=t(E);x=g(u,"Cancel"),u.forEach(c),w=m(r),V=o(r,"BUTTON",{class:!0});var h=t(V);k=g(h,"Delete"),h.forEach(c),r.forEach(c),this.h()},h(){i(n,"class","text-2xl font-bold"),i(E,"class","py-1 px-4 rounded text-base bg-yellow-600"),i(V,"class","py-1 px-4 rounded text-base bg-red-500"),i(s,"class","grid grid-flow-row gap-4")},m(r,o){l(r,s,o),v(s,n),v(n,a),v(s,d),v(s,p),v(p,$),v(s,b),v(s,E),v(E,x),v(s,w),v(s,V),v(V,k),y||(I=[T(E,"click",e[17]),T(V,"click",e[18])],y=!0)},p:u,d(e){e&&c(s),y=!1,j(I)}}}function ge(e){let s,n;return{c(){s=r("span"),n=h(e[4])},l(a){s=o(a,"SPAN",{});var r=t(s);n=g(r,e[4]),r.forEach(c)},m(e,a){l(e,s,a),v(s,n)},p(e,s){16&s&&p(n,e[4])},d(e){e&&c(s)}}}function me(e){let s,n,a,r,o,t,i=!e[3].fetching&&!e[3].error&&e[3].data.getVersion&&ce(e);const d=[ue,de,le,ie],u=[];function h(e,s){return e[3].fetching?0:e[3].error?1:e[3].data.getVersion?2:3}return a=h(e),r=u[a]=d[a](e),{c(){i&&i.c(),s=b(),n=f(),r.c(),o=b()},l(e){const a=E('[data-svelte="svelte-1lmfux"]',document.head);i&&i.l(a),s=b(),a.forEach(c),n=m(e),r.l(e),o=b()},m(e,r){i&&i.m(document.head,null),v(document.head,s),l(e,n,r),u[a].m(e,r),l(e,o,r),t=!0},p(e,[n]){e[3].fetching||e[3].error||!e[3].data.getVersion?i&&(i.d(1),i=null):i||(i=ce(e),i.c(),i.m(s.parentNode,s));let t=a;a=h(e),a===t?u[a].p(e,n):(N(),x(u[t],1,1,(()=>{u[t]=null})),w(),r=u[a],r?r.p(e,n):(r=u[a]=d[a](e),r.c()),V(r,1),r.m(o.parentNode,o))},i(e){t||(V(r),t=!0)},o(e){x(r),t=!1},d(e){i&&i.d(e),c(s),e&&c(n),u[a].d(e),e&&c(o)}}}var ve=function(e,s,n,a){return new(n||(n=Promise))((function(r,o){function t(e){try{i(a.next(e))}catch(s){o(s)}}function c(e){try{i(a.throw(e))}catch(s){o(s)}}function i(e){var s;e.done?r(e.value):(s=e.value,s instanceof n?s:new n((function(e){e(s)}))).then(t,c)}i((a=a.apply(e,s||[])).next())}))};const pe=$(_,{version:void 0}),$e=U((e=>ve(void 0,void 0,void 0,(function*(){return pe.variables.version=e.page.params.versionId,M({version:pe})(e)}))));function be(e,s,n){let a,r,o,t,c=u,i=()=>(c(),c=y(v,(e=>n(3,o=e))),v);var l,d,h,f;k(e,K,(e=>n(14,r=e))),e.$$.on_destroy.push((()=>c()));let{modId:g}=s,{versionId:m}=s,{version:v}=s;i();let p="",$=!1;const b=I({query:z}),E=D(!1);k(e,E,(e=>n(7,t=e)));const x=()=>{b({versionId:m}).then((e=>{e.error?(console.error(e.error.message),n(4,p="Error deleting version: "+e.error.message),n(5,$=!0)):X(Y+"/mod/"+g)}))};S(v);return e.$$set=e=>{"modId"in e&&n(0,g=e.modId),"versionId"in e&&n(1,m=e.versionId),"version"in e&&i(n(2,v=e.version))},e.$$.update=()=>{31752&e.$$.dirty&&n(6,a=(null===n(10,l=null==r?void 0:r.roles)||void 0===l?void 0:l.deleteContent)||(null===n(13,f=null===n(12,h=null===n(11,d=null==o?void 0:o.data)||void 0===d?void 0:d.getVersion.mod)||void 0===h?void 0:h.authors)||void 0===f?void 0:f.findIndex((e=>e.user_id==(null==r?void 0:r.id))))>=0)},[g,m,v,o,p,$,a,t,E,x,l,d,h,f,r,()=>X(Y+"/mod/"+g+"/version/"+m+"/edit"),()=>E.set(!0),()=>E.set(!1),()=>x(),function(e){t=e,E.set(t)},function(e){$=e,n(5,$)}]}class Ee extends e{constructor(e){super(),s(this,e,be,me,n,{modId:0,versionId:1,version:2})}}export{Ee as default,$e as load};
//# sourceMappingURL=index.svelte-f9ba04c0.js.map
