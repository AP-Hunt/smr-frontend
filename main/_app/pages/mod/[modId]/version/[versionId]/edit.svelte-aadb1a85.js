import{S as n,i as s,s as t,W as r,I as e,J as o,l as a,k as i,e as c,t as u,j as d,Z as m,d as f,n as l,c as h,a as p,g,m as $,b as v,Q as j,f as k,o as b,u as I,w as x,x as E,K as V,v as w,M as y,L as P,P as S,N,r as O,h as L}from"../../../../../chunks/vendor-9ef56761.js";import{p as T}from"../../../../../chunks/routing-1d144003.js";import{B as q,I as M}from"../../../../../chunks/graphql-7c12eb8b.js";import{T as _}from"../../../../../chunks/Toast-70852bff.js";import{g as A}from"../../../../../chunks/navigation-51f4a605.js";import{V as B}from"../../../../../chunks/VersionForm-5b0f65e8.js";import{b as F}from"../../../../../chunks/paths-6758d194.js";import"../../../../../chunks/singletons-12a22614.js";import"../../../../../chunks/uplugin-421a2e17.js";import"../../../../../chunks/api-82c76902.js";import"../../../../../chunks/user-f1838cad.js";import"../../../../../chunks/forms-8d025218.js";import"../../../../../chunks/markdown-f46c64ca.js";function H(n){return document.title="Edit "+n[1].data.getVersion.mod.name+" "+n[1].data.getVersion.version+" - SMR",{c:r,l:r,m:r,d:r}}function J(n){let s,t;return s=new B({props:{onSubmit:n[5],initialValues:n[3],editing:!0,submitText:"Save"}}),{c(){d(s.$$.fragment)},l(n){$(s.$$.fragment,n)},m(n,r){b(s,n,r),t=!0},p(n,t){const r={};8&t&&(r.initialValues=n[3]),s.$set(r)},i(n){t||(E(s.$$.fragment,n),t=!0)},o(n){I(s.$$.fragment,n),t=!1},d(n){w(s,n)}}}function K(n){let s,t,e,o=n[1].error.message+"";return{c(){s=c("p"),t=u("Oh no... "),e=u(o)},l(n){s=h(n,"P",{});var r=p(s);t=g(r,"Oh no... "),e=g(r,o),r.forEach(f)},m(n,r){k(n,s,r),j(s,t),j(s,e)},p(n,s){2&s&&o!==(o=n[1].error.message+"")&&L(e,o)},i:r,o:r,d(n){n&&f(s)}}}function Q(n){let s,t;return{c(){s=c("p"),t=u("Loading...")},l(n){s=h(n,"P",{});var r=p(s);t=g(r,"Loading..."),r.forEach(f)},m(n,r){k(n,s,r),j(s,t)},p:r,i:r,o:r,d(n){n&&f(s)}}}function R(n){let s,t;return{c(){s=c("span"),t=u(n[2])},l(r){s=h(r,"SPAN",{});var e=p(s);t=g(e,n[2]),e.forEach(f)},m(n,r){k(n,s,r),j(s,t)},p(n,s){4&s&&L(t,n[2])},d(n){n&&f(s)}}}function W(n){let s,t,r,y,P,S,N,L,T,q,M,A=!n[1].fetching&&!n[1].error&&H(n);const B=[Q,K,J],F=[];function W(n,s){return n[1].fetching?0:n[1].error?1:2}function Z(s){n[8](s)}S=W(n),N=F[S]=B[S](n);let z={$$slots:{default:[R]},$$scope:{ctx:n}};return void 0!==n[0]&&(z.running=n[0]),T=new _({props:z}),e.push((()=>o(T,"running",Z))),{c(){A&&A.c(),s=a(),t=i(),r=c("h1"),y=u("Edit Version"),P=i(),N.c(),L=i(),d(T.$$.fragment),this.h()},l(n){const e=m('[data-svelte="svelte-1shru01"]',document.head);A&&A.l(e),s=a(),e.forEach(f),t=l(n),r=h(n,"H1",{class:!0});var o=p(r);y=g(o,"Edit Version"),o.forEach(f),P=l(n),N.l(n),L=l(n),$(T.$$.fragment,n),this.h()},h(){v(r,"class","text-4xl my-4 font-bold")},m(n,e){A&&A.m(document.head,null),j(document.head,s),k(n,t,e),k(n,r,e),j(r,y),k(n,P,e),F[S].m(n,e),k(n,L,e),b(T,n,e),M=!0},p(n,[t]){n[1].fetching||n[1].error?A&&(A.d(1),A=null):A||(A=H(n),A.c(),A.m(s.parentNode,s));let r=S;S=W(n),S===r?F[S].p(n,t):(O(),I(F[r],1,1,(()=>{F[r]=null})),x(),N=F[S],N?N.p(n,t):(N=F[S]=B[S](n),N.c()),E(N,1),N.m(L.parentNode,L));const e={};2052&t&&(e.$$scope={dirty:t,ctx:n}),!q&&1&t&&(q=!0,e.running=n[0],V((()=>q=!1))),T.$set(e)},i(n){M||(E(N),E(T.$$.fragment,n),M=!0)},o(n){I(N),I(T.$$.fragment,n),M=!1},d(n){A&&A.d(n),f(s),n&&f(t),n&&f(r),n&&f(P),F[S].d(n),n&&f(L),w(T,n)}}}const Z=T();function z(n,s,t){let r,e;var o=this&&this.__awaiter||function(n,s,t,r){return new(t||(t=Promise))((function(e,o){function a(n){try{c(r.next(n))}catch(s){o(s)}}function i(n){try{c(r.throw(n))}catch(s){o(s)}}function c(n){var s;n.done?e(n.value):(s=n.value,s instanceof t?s:new t((function(n){n(s)}))).then(a,i)}c((r=r.apply(n,s||[])).next())}))};let{modId:a}=s,{versionId:i}=s,c="",u=!1;const d=y(q,{version:i});P(n,d,(n=>t(1,e=n)));const m=S({query:M});return N(d),n.$$set=n=>{"modId"in n&&t(6,a=n.modId),"versionId"in n&&t(7,i=n.versionId)},n.$$.update=()=>{1&n.$$.dirty&&(u||t(2,c="")),2&n.$$.dirty&&t(3,r=e.data?Object.assign(Object.assign({},e.data.getVersion),{logo:void 0}):void 0)},[u,e,c,r,d,n=>o(void 0,void 0,void 0,(function*(){return m({versionId:i,version:n}).then((n=>{if(!n.error)return A(F+"/mod/"+a+"/version/"+i);console.error(n.error.message),t(2,c="Error editing version: "+n.error.message),t(0,u=!0)}))})),a,i,function(n){u=n,t(0,u)}]}class C extends n{constructor(n){super(),s(this,n,z,W,t,{modId:6,versionId:7})}}export{C as default,Z as load};
//# sourceMappingURL=edit.svelte-aadb1a85.js.map
