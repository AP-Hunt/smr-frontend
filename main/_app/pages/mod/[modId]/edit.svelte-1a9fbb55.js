import{S as s,i as t,s as o,W as a,I as n,J as r,l as e,k as d,e as c,t as i,j as m,Z as u,d as f,n as l,c as p,a as h,g,m as $,b as v,Q as j,f as k,o as b,u as M,w as x,x as E,K as I,v as y,M as S,L as w,P as N,N as O,r as P,h as L}from"../../../chunks/vendor-9ef56761.js";import{p as T}from"../../../chunks/routing-405c8d47.js";import{v as q,J}from"../../../chunks/graphql-7c12eb8b.js";import{T as V}from"../../../chunks/Toast-70852bff.js";import{g as A}from"../../../chunks/navigation-51f4a605.js";import{M as F}from"../../../chunks/ModForm-dde5382b.js";import{b as H}from"../../../chunks/paths-6758d194.js";import"../../../chunks/singletons-12a22614.js";import"../../../chunks/forms-8d025218.js";import"../../../chunks/markdown-f46c64ca.js";function K(s){return document.title="Edit Mod: "+s[1].data.getMod.name+" - SMR",{c:a,l:a,m:a,d:a}}function Q(s){let t,o;return t=new F({props:{onSubmit:s[5],initialValues:s[3],editing:!0,submitText:"Save"}}),{c(){m(t.$$.fragment)},l(s){$(t.$$.fragment,s)},m(s,a){b(t,s,a),o=!0},p(s,o){const a={};8&o&&(a.initialValues=s[3]),t.$set(a)},i(s){o||(E(t.$$.fragment,s),o=!0)},o(s){M(t.$$.fragment,s),o=!1},d(s){y(t,s)}}}function R(s){let t,o,n,r=s[1].error.message+"";return{c(){t=c("p"),o=i("Oh no... "),n=i(r)},l(s){t=p(s,"P",{});var a=h(t);o=g(a,"Oh no... "),n=g(a,r),a.forEach(f)},m(s,a){k(s,t,a),j(t,o),j(t,n)},p(s,t){2&t&&r!==(r=s[1].error.message+"")&&L(n,r)},i:a,o:a,d(s){s&&f(t)}}}function W(s){let t,o;return{c(){t=c("p"),o=i("Loading...")},l(s){t=p(s,"P",{});var a=h(t);o=g(a,"Loading..."),a.forEach(f)},m(s,a){k(s,t,a),j(t,o)},p:a,i:a,o:a,d(s){s&&f(t)}}}function Z(s){let t,o;return{c(){t=c("span"),o=i(s[2])},l(a){t=p(a,"SPAN",{});var n=h(t);o=g(n,s[2]),n.forEach(f)},m(s,a){k(s,t,a),j(t,o)},p(s,t){4&t&&L(o,s[2])},d(s){s&&f(t)}}}function z(s){let t,o,a,S,w,N,O,L,T,q,J,A=!s[1].fetching&&!s[1].error&&K(s);const F=[W,R,Q],H=[];function z(s,t){return s[1].fetching?0:s[1].error?1:2}function B(t){s[7](t)}N=z(s),O=H[N]=F[N](s);let C={$$slots:{default:[Z]},$$scope:{ctx:s}};return void 0!==s[0]&&(C.running=s[0]),T=new V({props:C}),n.push((()=>r(T,"running",B))),{c(){A&&A.c(),t=e(),o=d(),a=c("h1"),S=i("Edit Mod"),w=d(),O.c(),L=d(),m(T.$$.fragment),this.h()},l(s){const n=u('[data-svelte="svelte-112dg5x"]',document.head);A&&A.l(n),t=e(),n.forEach(f),o=l(s),a=p(s,"H1",{class:!0});var r=h(a);S=g(r,"Edit Mod"),r.forEach(f),w=l(s),O.l(s),L=l(s),$(T.$$.fragment,s),this.h()},h(){v(a,"class","text-4xl my-4 font-bold")},m(s,n){A&&A.m(document.head,null),j(document.head,t),k(s,o,n),k(s,a,n),j(a,S),k(s,w,n),H[N].m(s,n),k(s,L,n),b(T,s,n),J=!0},p(s,[o]){s[1].fetching||s[1].error?A&&(A.d(1),A=null):A||(A=K(s),A.c(),A.m(t.parentNode,t));let a=N;N=z(s),N===a?H[N].p(s,o):(P(),M(H[a],1,1,(()=>{H[a]=null})),x(),O=H[N],O?O.p(s,o):(O=H[N]=F[N](s),O.c()),E(O,1),O.m(L.parentNode,L));const n={};516&o&&(n.$$scope={dirty:o,ctx:s}),!q&&1&o&&(q=!0,n.running=s[0],I((()=>q=!1))),T.$set(n)},i(s){J||(E(O),E(T.$$.fragment,s),J=!0)},o(s){M(O),M(T.$$.fragment,s),J=!1},d(s){A&&A.d(s),f(t),s&&f(o),s&&f(a),s&&f(w),H[N].d(s),s&&f(L),y(T,s)}}}const B=T();function C(s,t,o){let a,n,{modId:r}=t,e="",d=!1;const c=S(q,{mod:r});w(s,c,(s=>o(1,n=s)));const i=N({query:J});return O(c),s.$$set=s=>{"modId"in s&&o(6,r=s.modId)},s.$$.update=()=>{1&s.$$.dirty&&(d||o(2,e="")),2&s.$$.dirty&&o(3,a=n.data?Object.assign(Object.assign({},n.data.getMod),{logo:void 0}):void 0)},[d,n,e,a,c,s=>{i({modId:r,mod:s}).then((s=>{s.error?(console.error(s.error.message),o(2,e="Error editing mod: "+s.error.message),o(0,d=!0)):A(H+"/mod/"+s.data.updateMod.id)}))},r,function(s){d=s,o(0,d)}]}class D extends s{constructor(s){super(),t(this,s,C,z,o,{modId:6})}}export{D as default,B as load};
