import{S as a,i as s,s as e,I as r,J as t,k as n,e as o,t as c,j as i,Z as l,d as m,n as u,c as f,a as p,g as d,m as h,b as $,f as g,Q as v,o as x,u as b,w as y,x as E,K as S,v as w,L as j,P,aq as k,ax as I,ay as A,ar as U,r as N,au as L,av as T,aw as V,as as q,at as D,W as B,h as M}from"../../chunks/vendor-9ef56761.js";import{U as R}from"../../chunks/graphql-7c12eb8b.js";import{T as z}from"../../chunks/Toast-70852bff.js";import{g as F}from"../../chunks/navigation-51f4a605.js";import{t as H}from"../../chunks/forms-8d025218.js";import{a as J}from"../../chunks/user-f1838cad.js";import{b as K}from"../../chunks/paths-6758d194.js";import"../../chunks/singletons-12a22614.js";function O(a){let s,e,r,t,l,y,S,j,P,k,I,A,U,N,L,T,V,B,M,R,z,F,H;return P=new q({props:{for:"avatar",$$slots:{default:[W,({messages:a})=>({7:a}),({messages:a})=>a?128:0]},$$scope:{ctx:a}}}),V=new q({props:{for:"username",$$slots:{default:[Z,({messages:a})=>({7:a}),({messages:a})=>a?128:0]},$$scope:{ctx:a}}}),{c(){s=o("form"),e=o("div"),r=o("div"),t=o("label"),l=c("Avatar:"),y=n(),S=o("input"),j=n(),i(P.$$.fragment),k=n(),I=o("div"),A=o("label"),U=c("Username:"),N=n(),L=o("input"),T=n(),i(V.$$.fragment),B=n(),M=o("div"),R=o("input"),this.h()},l(a){s=f(a,"FORM",{});var n=p(s);e=f(n,"DIV",{class:!0});var o=p(e);r=f(o,"DIV",{class:!0});var c=p(r);t=f(c,"LABEL",{for:!0});var i=p(t);l=d(i,"Avatar:"),i.forEach(m),y=u(c),S=f(c,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),j=u(c),h(P.$$.fragment,c),c.forEach(m),k=u(o),I=f(o,"DIV",{class:!0});var $=p(I);A=f($,"LABEL",{for:!0});var g=p(A);U=d(g,"Username:"),g.forEach(m),N=u($),L=f($,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),T=u($),h(V.$$.fragment,$),$.forEach(m),B=u(o),M=f(o,"DIV",{});var v=p(M);R=f(v,"INPUT",{type:!0,class:!0}),v.forEach(m),o.forEach(m),n.forEach(m),this.h()},h(){$(t,"for","avatar"),$(S,"id","avatar"),$(S,"class","base-input"),$(S,"name","avatar"),$(S,"type","file"),$(S,"accept","image/png,image/jpeg,image/gif"),$(S,"placeholder","Avatar"),$(r,"class","grid grid-flow-row gap-2"),$(A,"for","username"),$(L,"id","username"),$(L,"class","base-input"),$(L,"name","username"),$(L,"type","text"),$(L,"placeholder","Username"),$(I,"class","grid grid-flow-row gap-2"),$(R,"type","submit"),R.value="Save",$(R,"class","px-4 py-2 rounded text-base bg-blue-500 cursor-pointer"),$(e,"class","grid grid-flow-row gap-6")},m(n,o){g(n,s,o),v(s,e),v(e,r),v(r,t),v(t,l),v(r,y),v(r,S),v(r,j),x(P,r,null),v(e,k),v(e,I),v(I,A),v(A,U),v(I,N),v(I,L),v(I,T),x(V,I,null),v(e,B),v(e,M),v(M,R),z=!0,F||(H=D(a[2].call(null,s)),F=!0)},p(a,s){const e={};384&s&&(e.$$scope={dirty:s,ctx:a}),P.$set(e);const r={};384&s&&(r.$$scope={dirty:s,ctx:a}),V.$set(r)},i(a){z||(E(P.$$.fragment,a),E(V.$$.fragment,a),z=!0)},o(a){b(P.$$.fragment,a),b(V.$$.fragment,a),z=!1},d(a){a&&m(s),w(P),w(V),F=!1,H()}}}function Q(a){let s,e;return{c(){s=o("p"),e=c("Please log in")},l(a){s=f(a,"P",{});var r=p(s);e=d(r,"Please log in"),r.forEach(m)},m(a,r){g(a,s,r),v(s,e)},p:B,i:B,o:B,d(a){a&&m(s)}}}function W(a){let s,e,r=(a[7]||"")+"";return{c(){s=o("span"),e=c(r),this.h()},l(a){s=f(a,"SPAN",{class:!0});var t=p(s);e=d(t,r),t.forEach(m),this.h()},h(){$(s,"class","validation-message")},m(a,r){g(a,s,r),v(s,e)},p(a,s){128&s&&r!==(r=(a[7]||"")+"")&&M(e,r)},d(a){a&&m(s)}}}function Z(a){let s,e,r=(a[7]||"")+"";return{c(){s=o("span"),e=c(r),this.h()},l(a){s=f(a,"SPAN",{class:!0});var t=p(s);e=d(t,r),t.forEach(m),this.h()},h(){$(s,"class","validation-message")},m(a,r){g(a,s,r),v(s,e)},p(a,s){128&s&&r!==(r=(a[7]||"")+"")&&M(e,r)},d(a){a&&m(s)}}}function C(a){let s,e;return{c(){s=o("span"),e=c(a[1])},l(r){s=f(r,"SPAN",{});var t=p(s);e=d(t,a[1]),t.forEach(m)},m(a,r){g(a,s,r),v(s,e)},p(a,s){2&s&&M(e,a[1])},d(a){a&&m(s)}}}function G(a){let s,e,j,P,k,I,A,U,L,T;const V=[Q,O],q=[];function D(a,s){return a[2]?1:0}function B(s){a[5](s)}k=D(a),I=q[k]=V[k](a);let M={$$slots:{default:[C]},$$scope:{ctx:a}};return void 0!==a[0]&&(M.running=a[0]),U=new z({props:M}),r.push((()=>t(U,"running",B))),{c(){s=n(),e=o("h1"),j=c("Settings"),P=n(),I.c(),A=n(),i(U.$$.fragment),this.h()},l(a){l('[data-svelte="svelte-q0f6b1"]',document.head).forEach(m),s=u(a),e=f(a,"H1",{class:!0});var r=p(e);j=d(r,"Settings"),r.forEach(m),P=u(a),I.l(a),A=u(a),h(U.$$.fragment,a),this.h()},h(){document.title="Settings - SMR",$(e,"class","text-4xl my-4 font-bold")},m(a,r){g(a,s,r),g(a,e,r),v(e,j),g(a,P,r),q[k].m(a,r),g(a,A,r),x(U,a,r),T=!0},p(a,[s]){let e=k;k=D(a),k===e?q[k].p(a,s):(N(),b(q[e],1,1,(()=>{q[e]=null})),y(),I=q[k],I?I.p(a,s):(I=q[k]=V[k](a),I.c()),E(I,1),I.m(A.parentNode,A));const r={};258&s&&(r.$$scope={dirty:s,ctx:a}),!L&&1&s&&(L=!0,r.running=a[0],S((()=>L=!1))),U.$set(r)},i(a){T||(E(I),E(U.$$.fragment,a),T=!0)},o(a){b(I),b(U.$$.fragment,a),T=!1},d(a){a&&m(s),a&&m(e),a&&m(P),q[k].d(a),a&&m(A),w(U,a)}}}function X(a,s,e){let r;j(a,J,(a=>e(4,r=a)));let t="",n=!1;const o=P({query:R}),c=k({avatar:I(A().refine((a=>"name"in a&&"size"in a&&"type"in a))),username:U().min(3).max(32)});let i;return a.$$.update=()=>{if(16&a.$$.dirty&&r){const{form:a}=L({initialValues:{username:r.username},extend:[T,V],validateSchema:c,onSubmit:a=>{o({user:H(a,c),userId:r.id}).then((a=>{a.error?(console.error(a.error.message),e(1,t="Error editing guide: "+a.error.message),e(0,n=!0)):F(K+"/user/"+a.data.updateUser.id)}))}});e(2,i=a)}1&a.$$.dirty&&(n||e(1,t=""))},[n,t,i,c,r,function(a){n=a,e(0,n),e(4,r)}]}class Y extends a{constructor(a){super(),s(this,a,X,G,e,{userSchema:3})}get userSchema(){return this.$$.ctx[3]}}export{Y as default};
