import{S as a,i as s,s as e,W as r,X as t,e as n,t as o,k as c,j as i,c as l,a as m,g as u,d as f,n as p,m as d,b as h,f as $,a1 as g,o as v,u as x,w as E,x as b,Y as y,v as S,Z as w,_ as j,aC as I,aJ as P,aK as k,aD as A,r as U,aE as N,aF as D,a7 as T,h as V,aG as L,aH as q,aI as B}from"../../chunks/vendor-83c23bd8.js";import{U as F}from"../../chunks/graphql-71bf8d51.js";import{T as H}from"../../chunks/Toast-11f90e22.js";import{g as z}from"../../chunks/navigation-2ffed81e.js";import{t as C}from"../../chunks/forms-8d025218.js";import{a as G}from"../../chunks/user-bb53616c.js";import"../../chunks/singletons-12a22614.js";function J(a){let s,e,r,t,E,y,w,j,I,P,k,A,U,T,V,L,q,B,F,H,z,C,G;return I=new N({props:{for:"avatar",$$slots:{default:[M,({messages:a})=>({7:a}),({messages:a})=>a?128:0]},$$scope:{ctx:a}}}),q=new N({props:{for:"username",$$slots:{default:[O,({messages:a})=>({7:a}),({messages:a})=>a?128:0]},$$scope:{ctx:a}}}),{c(){s=n("form"),e=n("div"),r=n("div"),t=n("label"),E=o("Avatar:"),y=c(),w=n("input"),j=c(),i(I.$$.fragment),P=c(),k=n("div"),A=n("label"),U=o("Username:"),T=c(),V=n("input"),L=c(),i(q.$$.fragment),B=c(),F=n("div"),H=n("input"),this.h()},l(a){s=l(a,"FORM",{});var n=m(s);e=l(n,"DIV",{class:!0});var o=m(e);r=l(o,"DIV",{class:!0});var c=m(r);t=l(c,"LABEL",{for:!0});var i=m(t);E=u(i,"Avatar:"),i.forEach(f),y=p(c),w=l(c,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),j=p(c),d(I.$$.fragment,c),c.forEach(f),P=p(o),k=l(o,"DIV",{class:!0});var h=m(k);A=l(h,"LABEL",{for:!0});var $=m(A);U=u($,"Username:"),$.forEach(f),T=p(h),V=l(h,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),L=p(h),d(q.$$.fragment,h),h.forEach(f),B=p(o),F=l(o,"DIV",{});var g=m(F);H=l(g,"INPUT",{type:!0,class:!0}),g.forEach(f),o.forEach(f),n.forEach(f),this.h()},h(){h(t,"for","avatar"),h(w,"id","avatar"),h(w,"class","base-input"),h(w,"name","avatar"),h(w,"type","file"),h(w,"accept","image/png,image/jpeg,image/gif"),h(w,"placeholder","Avatar"),h(r,"class","grid grid-flow-row gap-2"),h(A,"for","username"),h(V,"id","username"),h(V,"class","base-input"),h(V,"name","username"),h(V,"type","text"),h(V,"placeholder","Username"),h(k,"class","grid grid-flow-row gap-2"),h(H,"type","submit"),H.value="Save",h(H,"class","px-4 py-2 rounded text-base bg-blue-500 cursor-pointer"),h(e,"class","grid grid-flow-row gap-6")},m(n,o){$(n,s,o),g(s,e),g(e,r),g(r,t),g(t,E),g(r,y),g(r,w),g(r,j),v(I,r,null),g(e,P),g(e,k),g(k,A),g(A,U),g(k,T),g(k,V),g(k,L),v(q,k,null),g(e,B),g(e,F),g(F,H),z=!0,C||(G=D(a[2].call(null,s)),C=!0)},p(a,s){const e={};384&s&&(e.$$scope={dirty:s,ctx:a}),I.$set(e);const r={};384&s&&(r.$$scope={dirty:s,ctx:a}),q.$set(r)},i(a){z||(b(I.$$.fragment,a),b(q.$$.fragment,a),z=!0)},o(a){x(I.$$.fragment,a),x(q.$$.fragment,a),z=!1},d(a){a&&f(s),S(I),S(q),C=!1,G()}}}function K(a){let s,e;return{c(){s=n("p"),e=o("Please log in")},l(a){s=l(a,"P",{});var r=m(s);e=u(r,"Please log in"),r.forEach(f)},m(a,r){$(a,s,r),g(s,e)},p:T,i:T,o:T,d(a){a&&f(s)}}}function M(a){let s,e,r=(a[7]||"")+"";return{c(){s=n("span"),e=o(r),this.h()},l(a){s=l(a,"SPAN",{class:!0});var t=m(s);e=u(t,r),t.forEach(f),this.h()},h(){h(s,"class","validation-message")},m(a,r){$(a,s,r),g(s,e)},p(a,s){128&s&&r!==(r=(a[7]||"")+"")&&V(e,r)},d(a){a&&f(s)}}}function O(a){let s,e,r=(a[7]||"")+"";return{c(){s=n("span"),e=o(r),this.h()},l(a){s=l(a,"SPAN",{class:!0});var t=m(s);e=u(t,r),t.forEach(f),this.h()},h(){h(s,"class","validation-message")},m(a,r){$(a,s,r),g(s,e)},p(a,s){128&s&&r!==(r=(a[7]||"")+"")&&V(e,r)},d(a){a&&f(s)}}}function R(a){let s,e;return{c(){s=n("span"),e=o(a[1])},l(r){s=l(r,"SPAN",{});var t=m(s);e=u(t,a[1]),t.forEach(f)},m(a,r){$(a,s,r),g(s,e)},p(a,s){2&s&&V(e,a[1])},d(a){a&&f(s)}}}function W(a){let s,e,w,j,I,P,k,A,N;const D=[K,J],T=[];function V(a,s){return a[2]?1:0}function L(s){a[5](s)}j=V(a),I=T[j]=D[j](a);let q={$$slots:{default:[R]},$$scope:{ctx:a}};return void 0!==a[0]&&(q.running=a[0]),k=new H({props:q}),r.push((()=>t(k,"running",L))),{c(){s=n("h1"),e=o("Settings"),w=c(),I.c(),P=c(),i(k.$$.fragment),this.h()},l(a){s=l(a,"H1",{class:!0});var r=m(s);e=u(r,"Settings"),r.forEach(f),w=p(a),I.l(a),P=p(a),d(k.$$.fragment,a),this.h()},h(){h(s,"class","text-4xl my-4 font-bold")},m(a,r){$(a,s,r),g(s,e),$(a,w,r),T[j].m(a,r),$(a,P,r),v(k,a,r),N=!0},p(a,[s]){let e=j;j=V(a),j===e?T[j].p(a,s):(U(),x(T[e],1,1,(()=>{T[e]=null})),E(),I=T[j],I?I.p(a,s):(I=T[j]=D[j](a),I.c()),b(I,1),I.m(P.parentNode,P));const r={};258&s&&(r.$$scope={dirty:s,ctx:a}),!A&&1&s&&(A=!0,r.running=a[0],y((()=>A=!1))),k.$set(r)},i(a){N||(b(I),b(k.$$.fragment,a),N=!0)},o(a){x(I),x(k.$$.fragment,a),N=!1},d(a){a&&f(s),a&&f(w),T[j].d(a),a&&f(P),S(k,a)}}}function X(a,s,e){let r;w(a,G,(a=>e(4,r=a)));let t="",n=!1;const o=j({query:F}),c=I({avatar:P(k().refine((a=>"name"in a&&"size"in a&&"type"in a))),username:A().min(3).max(32)});let i;return a.$$.update=()=>{if(16&a.$$.dirty&&r){const{form:a}=L({initialValues:{username:r.username},extend:[q,B],validateSchema:c,onSubmit:a=>{o({user:C(a,c),userId:r.id}).then((a=>{a.error?(console.error(a.error.message),e(1,t="Error editing guide: "+a.error.message),e(0,n=!0)):z("/user/"+a.data.updateUser.id)}))}});e(2,i=a)}1&a.$$.dirty&&(n||e(1,t=""))},[n,t,i,c,r,function(a){n=a,e(0,n),e(4,r)}]}class Y extends a{constructor(a){super(),s(this,a,X,W,e,{userSchema:3})}get userSchema(){return this.$$.ctx[3]}}export{Y as default};
