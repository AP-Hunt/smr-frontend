import{S as a,i as s,s as e,W as r,X as t,e as n,t as o,k as c,j as i,c as l,a as m,g as u,d as f,n as p,m as d,b as h,f as $,a1 as g,o as v,u as x,w as b,x as E,Y as y,v as S,Z as j,_ as w,aC as k,aJ as I,aK as P,aD as A,r as U,aE as N,aF as D,a7 as T,h as V,aG as L,aH as q,aI as B}from"../../chunks/vendor-83c23bd8.js";import{U as F}from"../../chunks/graphql-71bf8d51.js";import{T as H}from"../../chunks/Toast-11f90e22.js";import{g as z}from"../../chunks/navigation-2ffed81e.js";import{t as C}from"../../chunks/forms-8d025218.js";import{a as G}from"../../chunks/user-bb53616c.js";import{b as J}from"../../chunks/paths-6758d194.js";import"../../chunks/singletons-12a22614.js";function K(a){let s,e,r,t,b,y,j,w,k,I,P,A,U,T,V,L,q,B,F,H,z,C,G;return k=new N({props:{for:"avatar",$$slots:{default:[O,({messages:a})=>({7:a}),({messages:a})=>a?128:0]},$$scope:{ctx:a}}}),q=new N({props:{for:"username",$$slots:{default:[R,({messages:a})=>({7:a}),({messages:a})=>a?128:0]},$$scope:{ctx:a}}}),{c(){s=n("form"),e=n("div"),r=n("div"),t=n("label"),b=o("Avatar:"),y=c(),j=n("input"),w=c(),i(k.$$.fragment),I=c(),P=n("div"),A=n("label"),U=o("Username:"),T=c(),V=n("input"),L=c(),i(q.$$.fragment),B=c(),F=n("div"),H=n("input"),this.h()},l(a){s=l(a,"FORM",{});var n=m(s);e=l(n,"DIV",{class:!0});var o=m(e);r=l(o,"DIV",{class:!0});var c=m(r);t=l(c,"LABEL",{for:!0});var i=m(t);b=u(i,"Avatar:"),i.forEach(f),y=p(c),j=l(c,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),w=p(c),d(k.$$.fragment,c),c.forEach(f),I=p(o),P=l(o,"DIV",{class:!0});var h=m(P);A=l(h,"LABEL",{for:!0});var $=m(A);U=u($,"Username:"),$.forEach(f),T=p(h),V=l(h,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),L=p(h),d(q.$$.fragment,h),h.forEach(f),B=p(o),F=l(o,"DIV",{});var g=m(F);H=l(g,"INPUT",{type:!0,class:!0}),g.forEach(f),o.forEach(f),n.forEach(f),this.h()},h(){h(t,"for","avatar"),h(j,"id","avatar"),h(j,"class","base-input"),h(j,"name","avatar"),h(j,"type","file"),h(j,"accept","image/png,image/jpeg,image/gif"),h(j,"placeholder","Avatar"),h(r,"class","grid grid-flow-row gap-2"),h(A,"for","username"),h(V,"id","username"),h(V,"class","base-input"),h(V,"name","username"),h(V,"type","text"),h(V,"placeholder","Username"),h(P,"class","grid grid-flow-row gap-2"),h(H,"type","submit"),H.value="Save",h(H,"class","px-4 py-2 rounded text-base bg-blue-500 cursor-pointer"),h(e,"class","grid grid-flow-row gap-6")},m(n,o){$(n,s,o),g(s,e),g(e,r),g(r,t),g(t,b),g(r,y),g(r,j),g(r,w),v(k,r,null),g(e,I),g(e,P),g(P,A),g(A,U),g(P,T),g(P,V),g(P,L),v(q,P,null),g(e,B),g(e,F),g(F,H),z=!0,C||(G=D(a[2].call(null,s)),C=!0)},p(a,s){const e={};384&s&&(e.$$scope={dirty:s,ctx:a}),k.$set(e);const r={};384&s&&(r.$$scope={dirty:s,ctx:a}),q.$set(r)},i(a){z||(E(k.$$.fragment,a),E(q.$$.fragment,a),z=!0)},o(a){x(k.$$.fragment,a),x(q.$$.fragment,a),z=!1},d(a){a&&f(s),S(k),S(q),C=!1,G()}}}function M(a){let s,e;return{c(){s=n("p"),e=o("Please log in")},l(a){s=l(a,"P",{});var r=m(s);e=u(r,"Please log in"),r.forEach(f)},m(a,r){$(a,s,r),g(s,e)},p:T,i:T,o:T,d(a){a&&f(s)}}}function O(a){let s,e,r=(a[7]||"")+"";return{c(){s=n("span"),e=o(r),this.h()},l(a){s=l(a,"SPAN",{class:!0});var t=m(s);e=u(t,r),t.forEach(f),this.h()},h(){h(s,"class","validation-message")},m(a,r){$(a,s,r),g(s,e)},p(a,s){128&s&&r!==(r=(a[7]||"")+"")&&V(e,r)},d(a){a&&f(s)}}}function R(a){let s,e,r=(a[7]||"")+"";return{c(){s=n("span"),e=o(r),this.h()},l(a){s=l(a,"SPAN",{class:!0});var t=m(s);e=u(t,r),t.forEach(f),this.h()},h(){h(s,"class","validation-message")},m(a,r){$(a,s,r),g(s,e)},p(a,s){128&s&&r!==(r=(a[7]||"")+"")&&V(e,r)},d(a){a&&f(s)}}}function W(a){let s,e;return{c(){s=n("span"),e=o(a[1])},l(r){s=l(r,"SPAN",{});var t=m(s);e=u(t,a[1]),t.forEach(f)},m(a,r){$(a,s,r),g(s,e)},p(a,s){2&s&&V(e,a[1])},d(a){a&&f(s)}}}function X(a){let s,e,j,w,k,I,P,A,N;const D=[M,K],T=[];function V(a,s){return a[2]?1:0}function L(s){a[5](s)}w=V(a),k=T[w]=D[w](a);let q={$$slots:{default:[W]},$$scope:{ctx:a}};return void 0!==a[0]&&(q.running=a[0]),P=new H({props:q}),r.push((()=>t(P,"running",L))),{c(){s=n("h1"),e=o("Settings"),j=c(),k.c(),I=c(),i(P.$$.fragment),this.h()},l(a){s=l(a,"H1",{class:!0});var r=m(s);e=u(r,"Settings"),r.forEach(f),j=p(a),k.l(a),I=p(a),d(P.$$.fragment,a),this.h()},h(){h(s,"class","text-4xl my-4 font-bold")},m(a,r){$(a,s,r),g(s,e),$(a,j,r),T[w].m(a,r),$(a,I,r),v(P,a,r),N=!0},p(a,[s]){let e=w;w=V(a),w===e?T[w].p(a,s):(U(),x(T[e],1,1,(()=>{T[e]=null})),b(),k=T[w],k?k.p(a,s):(k=T[w]=D[w](a),k.c()),E(k,1),k.m(I.parentNode,I));const r={};258&s&&(r.$$scope={dirty:s,ctx:a}),!A&&1&s&&(A=!0,r.running=a[0],y((()=>A=!1))),P.$set(r)},i(a){N||(E(k),E(P.$$.fragment,a),N=!0)},o(a){x(k),x(P.$$.fragment,a),N=!1},d(a){a&&f(s),a&&f(j),T[w].d(a),a&&f(I),S(P,a)}}}function Y(a,s,e){let r;j(a,G,(a=>e(4,r=a)));let t="",n=!1;const o=w({query:F}),c=k({avatar:I(P().refine((a=>"name"in a&&"size"in a&&"type"in a))),username:A().min(3).max(32)});let i;return a.$$.update=()=>{if(16&a.$$.dirty&&r){const{form:a}=L({initialValues:{username:r.username},extend:[q,B],validateSchema:c,onSubmit:a=>{o({user:C(a,c),userId:r.id}).then((a=>{a.error?(console.error(a.error.message),e(1,t="Error editing guide: "+a.error.message),e(0,n=!0)):z(J+"/user/"+a.data.updateUser.id)}))}});e(2,i=a)}1&a.$$.dirty&&(n||e(1,t=""))},[n,t,i,c,r,function(a){n=a,e(0,n),e(4,r)}]}class Z extends a{constructor(a){super(),s(this,a,Y,X,e,{userSchema:3})}get userSchema(){return this.$$.ctx[3]}}export{Z as default};
