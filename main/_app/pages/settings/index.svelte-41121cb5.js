import{S as a,i as s,s as e,J as r,K as t,k as n,e as o,t as c,j as i,$ as l,d as m,n as u,c as f,a as p,g as d,m as h,b as $,f as g,R as v,o as b,u as x,w as y,x as E,L as S,v as w,M as j,Q as k,ar as P,ay as A,az as I,as as U,r as N,av as L,aw as T,ax as V,at as D,au as q,X as M,h as R}from"../../chunks/vendor-ecacde99.js";import{U as z}from"../../chunks/graphql-7c12eb8b.js";import{T as B}from"../../chunks/Toast-1c3d573d.js";import{g as F}from"../../chunks/navigation-51f4a605.js";import{t as H}from"../../chunks/forms-8d025218.js";import{a as J}from"../../chunks/user-bb5babe5.js";import{b as K}from"../../chunks/paths-6758d194.js";import"../../chunks/singletons-12a22614.js";function O(a){let s,e,r,t,l,y,S,j,k,P,A,I,U,N,L,T,V,M,R,z,B,F,H;return k=new D({props:{for:"avatar",$$slots:{default:[X,({messages:a})=>({7:a}),({messages:a})=>a?128:0]},$$scope:{ctx:a}}}),V=new D({props:{for:"username",$$slots:{default:[C,({messages:a})=>({7:a}),({messages:a})=>a?128:0]},$$scope:{ctx:a}}}),{c(){s=o("form"),e=o("div"),r=o("div"),t=o("label"),l=c("Avatar:"),y=n(),S=o("input"),j=n(),i(k.$$.fragment),P=n(),A=o("div"),I=o("label"),U=c("Username:"),N=n(),L=o("input"),T=n(),i(V.$$.fragment),M=n(),R=o("div"),z=o("input"),this.h()},l(a){s=f(a,"FORM",{});var n=p(s);e=f(n,"DIV",{class:!0});var o=p(e);r=f(o,"DIV",{class:!0});var c=p(r);t=f(c,"LABEL",{for:!0});var i=p(t);l=d(i,"Avatar:"),i.forEach(m),y=u(c),S=f(c,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),j=u(c),h(k.$$.fragment,c),c.forEach(m),P=u(o),A=f(o,"DIV",{class:!0});var $=p(A);I=f($,"LABEL",{for:!0});var g=p(I);U=d(g,"Username:"),g.forEach(m),N=u($),L=f($,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),T=u($),h(V.$$.fragment,$),$.forEach(m),M=u(o),R=f(o,"DIV",{});var v=p(R);z=f(v,"INPUT",{type:!0,class:!0}),v.forEach(m),o.forEach(m),n.forEach(m),this.h()},h(){$(t,"for","avatar"),$(S,"id","avatar"),$(S,"class","base-input"),$(S,"name","avatar"),$(S,"type","file"),$(S,"accept","image/png,image/jpeg,image/gif"),$(S,"placeholder","Avatar"),$(r,"class","grid grid-flow-row gap-2"),$(I,"for","username"),$(L,"id","username"),$(L,"class","base-input"),$(L,"name","username"),$(L,"type","text"),$(L,"placeholder","Username"),$(A,"class","grid grid-flow-row gap-2"),$(z,"type","submit"),z.value="Save",$(z,"class","px-4 py-2 rounded text-base bg-blue-500 cursor-pointer"),$(e,"class","grid grid-flow-row gap-6")},m(n,o){g(n,s,o),v(s,e),v(e,r),v(r,t),v(t,l),v(r,y),v(r,S),v(r,j),b(k,r,null),v(e,P),v(e,A),v(A,I),v(I,U),v(A,N),v(A,L),v(A,T),b(V,A,null),v(e,M),v(e,R),v(R,z),B=!0,F||(H=q(a[2].call(null,s)),F=!0)},p(a,s){const e={};384&s&&(e.$$scope={dirty:s,ctx:a}),k.$set(e);const r={};384&s&&(r.$$scope={dirty:s,ctx:a}),V.$set(r)},i(a){B||(E(k.$$.fragment,a),E(V.$$.fragment,a),B=!0)},o(a){x(k.$$.fragment,a),x(V.$$.fragment,a),B=!1},d(a){a&&m(s),w(k),w(V),F=!1,H()}}}function Q(a){let s,e;return{c(){s=o("p"),e=c("Please log in")},l(a){s=f(a,"P",{});var r=p(s);e=d(r,"Please log in"),r.forEach(m)},m(a,r){g(a,s,r),v(s,e)},p:M,i:M,o:M,d(a){a&&m(s)}}}function X(a){let s,e,r=(a[7]||"")+"";return{c(){s=o("span"),e=c(r),this.h()},l(a){s=f(a,"SPAN",{class:!0});var t=p(s);e=d(t,r),t.forEach(m),this.h()},h(){$(s,"class","validation-message")},m(a,r){g(a,s,r),v(s,e)},p(a,s){128&s&&r!==(r=(a[7]||"")+"")&&R(e,r)},d(a){a&&m(s)}}}function C(a){let s,e,r=(a[7]||"")+"";return{c(){s=o("span"),e=c(r),this.h()},l(a){s=f(a,"SPAN",{class:!0});var t=p(s);e=d(t,r),t.forEach(m),this.h()},h(){$(s,"class","validation-message")},m(a,r){g(a,s,r),v(s,e)},p(a,s){128&s&&r!==(r=(a[7]||"")+"")&&R(e,r)},d(a){a&&m(s)}}}function G(a){let s,e;return{c(){s=o("span"),e=c(a[1])},l(r){s=f(r,"SPAN",{});var t=p(s);e=d(t,a[1]),t.forEach(m)},m(a,r){g(a,s,r),v(s,e)},p(a,s){2&s&&R(e,a[1])},d(a){a&&m(s)}}}function W(a){let s,e,j,k,P,A,I,U,L,T;const V=[Q,O],D=[];function q(a,s){return a[2]?1:0}function M(s){a[5](s)}P=q(a),A=D[P]=V[P](a);let R={$$slots:{default:[G]},$$scope:{ctx:a}};return void 0!==a[0]&&(R.running=a[0]),U=new B({props:R}),r.push((()=>t(U,"running",M))),{c(){s=n(),e=o("h1"),j=c("Settings"),k=n(),A.c(),I=n(),i(U.$$.fragment),this.h()},l(a){l('[data-svelte="svelte-q0f6b1"]',document.head).forEach(m),s=u(a),e=f(a,"H1",{class:!0});var r=p(e);j=d(r,"Settings"),r.forEach(m),k=u(a),A.l(a),I=u(a),h(U.$$.fragment,a),this.h()},h(){document.title="Settings - SMR",$(e,"class","text-4xl my-4 font-bold")},m(a,r){g(a,s,r),g(a,e,r),v(e,j),g(a,k,r),D[P].m(a,r),g(a,I,r),b(U,a,r),T=!0},p(a,[s]){let e=P;P=q(a),P===e?D[P].p(a,s):(N(),x(D[e],1,1,(()=>{D[e]=null})),y(),A=D[P],A?A.p(a,s):(A=D[P]=V[P](a),A.c()),E(A,1),A.m(I.parentNode,I));const r={};258&s&&(r.$$scope={dirty:s,ctx:a}),!L&&1&s&&(L=!0,r.running=a[0],S((()=>L=!1))),U.$set(r)},i(a){T||(E(A),E(U.$$.fragment,a),T=!0)},o(a){x(A),x(U.$$.fragment,a),T=!1},d(a){a&&m(s),a&&m(e),a&&m(k),D[P].d(a),a&&m(I),w(U,a)}}}function Y(a,s,e){let r;j(a,J,(a=>e(4,r=a)));let t="",n=!1;const o=k({query:z}),c=P({avatar:A(I().refine((a=>"name"in a&&"size"in a&&"type"in a))),username:U().min(3).max(32)});let i;return a.$$.update=()=>{if(16&a.$$.dirty&&r){const{form:a}=L({initialValues:{username:r.username},extend:[T,V],validateSchema:c,onSubmit:a=>{o({user:H(a,c),userId:r.id}).then((a=>{a.error?(console.error(a.error.message),e(1,t="Error editing guide: "+a.error.message),e(0,n=!0)):F(K+"/user/"+a.data.updateUser.id)}))}});e(2,i=a)}1&a.$$.dirty&&(n||e(1,t=""))},[n,t,i,c,r,function(a){n=a,e(0,n),e(4,r)}]}class Z extends a{constructor(a){super(),s(this,a,Y,W,e,{userSchema:3})}get userSchema(){return this.$$.ctx[3]}}export{Z as default};
//# sourceMappingURL=index.svelte-41121cb5.js.map
